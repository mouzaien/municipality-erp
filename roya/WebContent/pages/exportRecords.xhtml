<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./WebTemplate.xhtml">
            <ui:define name="top">
                تصدير المعاملات - و طباعه الباركود
            </ui:define>
            <ui:define name="content">
                <h:form id="eportFormId">
                    <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
                     
                    <p:dialog widgetVar="statusDialog" modal="true" 
                              draggable="false" closable="false" resizable="false" showHeader="false">
                            <p:graphicImage value="../resources/images/loadingT.gif" />
                    </p:dialog>
                    <p:growl autoUpdate="true" /> 
                    <div class="container-fluid">
                        <div class="row" style="margin: 10px;">
                            <div class="col-md-8">
                                <p:selectOneMenu style="width: 100%;margin: 0px;"
                                                 filter="true" filterMatchMode="contains"
                                                 value="#{exportRecordsBean.selectedIncomeNo}"
                                                 required="true"
                                                 requiredMessage="لم يتم أختيار المعاملة"
                                                 id="selectedRecordListId"
                                                 >
                                    <f:selectItem itemLabel="أختر المعاملة المطلوب تصديرها" />
                                    <f:selectItems value="#{exportRecordsBean.returnMap}" /> 
                                </p:selectOneMenu>
                            </div>
                            <div class="col-md-4" style="margin: 0px;">
                                <p:commandButton value="عرض بيانات المعاملة" icon="fa" style="width: 100%;"
                                                 process="@this,:tempform:eportFormId:selectedRecordListId"
                                                 action="#{exportRecordsBean.showRecordDetailsBtnAction(actionEvent)}"
                                                 update=":tempform:eportFormId:record_data,
                                                 :tempform:eportFormId:btnformid001:btnpanelid001"
                                                 />
                            </div>
                        </div>
                        <div class="row">
                            <h:form id="btnformid001">
                                <p:outputPanel id="btnpanelid001">

                                    <div class="col-md-3">

                                    </div>
                                    <div class="col-md-3">
                                        <h:outputLink
                                            rendered="#{exportRecordsBean.recordHasComment}"
                                            value="#{exportRecordsBean.wrk_ID_NUMBER}" target="_blank"
                                            class="ui-button ui-widget ui-state-default  ui-button-text-icon-left " 
                                            style="width: 100%;height:  100%;">
                                            <span style="color: whitesmoke">طباعة الخطاب</span>
                                            <span style="color: whitesmoke" class="fa fa-print"></span>
                                        </h:outputLink>
                                    </div>

                                    <div class="col-md-3">
                                        <h:outputLink
                                            rendered="#{exportRecordsBean.recordHasComment}"
                                            value="#{exportRecordsBean.barcodeLink}" target="_blank"
                                            class="ui-button ui-widget ui-state-default  ui-button-text-icon-left " 
                                            style="width: 100%;height:  100%;">
                                            <span style="color: whitesmoke">طباعة الباركود</span>
                                            <span style="color: whitesmoke" class="fa fa-barcode"></span>
                                        </h:outputLink>
                                     
                                    </div>

                                    
                                    <div class="col-md-3">

                                    </div>
                                </p:outputPanel>
                            </h:form>
                            

                        </div>
                        
                        <div class="row" style="margin: 10px;">
                            <p:panel header="بيانات المعاملة " style="width: 100%">
                                <p:outputPanel id="record_data">

                                    <p:panelGrid columns="2">
                                        <p:outputLabel value="رقم الوارد العام" style="color: #036fab" />
                                        <p:outputLabel value="#{exportRecordsBean.arcRecordClass.incomeNo}" />
                                        <p:outputLabel value="موضوع المعاملة" style="color: #036fab" />
                                        <p:outputLabel value="#{exportRecordsBean.arcRecordClass.recTitle}" />
                                        <p:outputLabel value="تاريخ المعاملة" style="color: #036fab" />
                                        <p:outputLabel value="#{exportRecordsBean.arcRecordClass.recHDate}" />
                                        <p:outputLabel value="نص الخطاب " style="color: #036fab" />
                                        <p:outputLabel value="#{exportRecordsBean.arcRecordClass.lastRecord.commentText}" />
                                        <p:outputLabel value="مكوث المعاملة" style="color: #036fab" />
                                        <p:outputLabel value="#{exportRecordsBean.arcRecordClass.lastRecord.lastWrkdurationindays}  من الايام" />
                                    </p:panelGrid>
                                </p:outputPanel>
                            </p:panel>
                        </div>
                        <p:row>
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                                
                                    <p:commandButton value="إعتماد التصدير "
                                                     process="@this,:tempform:eportFormId:selectedRecordListId"
                                                 action="#{exportRecordsBean.exportRecordBtnAction(actionEvent)}"
                                                 icon="fa fa-gavel" style="width: 100%"/>
                                
                            </div>
                            <div class="col-md-4"></div>
                        </p:row>
                    </div>



                </h:form>




            </ui:define>

        </ui:composition>

    </body>
</html>
