<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view>
	<h:body>
		<ui:composition template="/template.xhtml">
			<ui:define name="content">
				<h:form prependId="false">
					<p:messages autoUpdate="true" closable="true"></p:messages>

					<div class="image-box-footer">
						<p:commandButton value="الانتدابات والدورات" ajax="false"
							style="float: left !important;" onclick="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()"
							actionListener="#{deputationTrainingBean.dowloadDepTrainFile}"
							icon="ui-icon-arrowthick-1-s">
							<p:fileDownload value="#{deputationTrainingBean.file}" />
						</p:commandButton>
					</div>
					<br />
					<br />
					<div class="card card-w-title" dir="rtl">
						<h1 style="color: #7CB342; text-align: center;">
							استعلام التدريب<span class="fa fa-fw fa-clock-o"></span>
						</h1>
						<div class="ui-g">
							<div class="ui-g-12 ui-md-6 ui-lg-1">
								<h:outputLabel value="الموظف" styleClass="btxt" />
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-3">
								<p:selectOneMenu id="empNBList"
									value="#{deputationTrainingBean.employerNB}">
									<f:selectItem itemLabel="الكل" itemValue="0"></f:selectItem>
									<f:selectItems value="#{deputationTrainingBean.employersList}"
										var="emp" itemValue="#{emp.employeNumber}"
										itemLabel="#{emp.firstName} #{emp.secondName} #{emp.thirdName} #{emp.forthName}" />

									<f:ajax render="data" execute="empNBList" event="change"
										listener="#{deputationTrainingBean.loadStatus}" />
								</p:selectOneMenu>
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-1">
								<h:outputLabel style="margin-right:15px;" value="الشهر"
									styleClass="btxt" />
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-3">
								<p:selectOneMenu required="true" style="width:200px;"
									id="selectedmonth" value="#{deputationTrainingBean.month}">
									<f:selectItem itemLabel="اختر الشهر" itemValue="" />
									<f:selectItems value="#{deputationTrainingBean.listMonth}"
										var="months" itemLabel="#{months.nameAr} #{months.id}"
										itemValue="#{months.id}" />
									<f:ajax render="data" execute="empNBList" event="change"
										listener="#{deputationTrainingBean.loadMonthYearStatus}" />

								</p:selectOneMenu>
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-1">
								<h:outputLabel style="margin-right:15px;" value="السنه"
									styleClass="btxt" />
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-3">
								<p:spinner id="minMax" value="#{deputationTrainingBean.year}"
									min="1435" max="1500">
									<f:ajax render="data" execute="empNBList" event="blur"
										listener="#{deputationTrainingBean.loadMonthYearStatus}" />
								</p:spinner>
							</div>

						</div>

						<br /> <br />

						<p:dataTable id="data" var="lst" widgetVar="trainVar"
							value="#{deputationTrainingBean.list}" paginator="true" rows="12"
							emptyMessage="لا يوجد" rowIndexVar="rowIndex"
							paginatorPosition="bottom"
							paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
							<f:facet name="header">
									<p:outputPanel>
										<h:outputText value="ابحث فى كل الحقول:" />
										<p:inputText id="globalFilter" onkeyup="PF('trainVar').filter()"
											style="width:50%" placeholder="كلمة البحث">
										</p:inputText>
									</p:outputPanel>
							</f:facet>


							<p:column headerText="نوع المهمه" filterable="true"
								filterBy="#{lst.type_of_mission}" filterMatchMode="contains">
								<center>
									<h:outputText value="#{lst.type_of_mission}" />
								</center>
							</p:column>

							<p:column headerText="عدد الايام">
								<center>
									<h:outputText value="#{lst.dayscount}" />
								</center>
							</p:column>

							<p:column headerText="المهمه">
								<center>
									<h:outputText value="#{lst.mission}" />
								</center>
							</p:column>

							<p:column headerText="بدل النقل">
								<center>
									<h:outputText value="#{lst.trans_allowance}" />
								</center>
							</p:column>

							<p:column headerText="بدل التدريب">
								<center>
									<h:outputText value="#{lst.train_allowance}" />
								</center>
							</p:column>
							<p:column headerText="السنه">
								<center>
									<h:outputText value="#{lst.year}" />
								</center>
							</p:column>


							<p:column headerText="الشهر">
								<center>
									<h:outputText value="#{lst.month}" />
								</center>
							</p:column>
							<p:column headerText="تاريخ البدا">
								<center>
									<h:outputText value="#{lst.hij_st_date}" />
								</center>
							</p:column>
							<p:column headerText="النوع" filterable="true"
								filterBy="#{lst.category_name}" filterMatchMode="contains">
								<center>
									<h:outputText value="#{lst.category_name}" />
								</center>
							</p:column>




						</p:dataTable>



					</div>


				</h:form>

			</ui:define>
		</ui:composition>
	</h:body>
</f:view>
</html>
