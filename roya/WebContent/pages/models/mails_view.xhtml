<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view>


	<h:head>

		<link
			href="#{facesContext.externalContext.requestContextPath}/resources/css/style.css"
			rel="stylesheet" type="text/css"></link>
	</h:head>

	<h:body>

		<p:toolbar id="inboxtoolbar" style="margin-bottom: 2px">
			<f:facet name="left">
				<p:commandButton value=" بحـث" style="width: 100px;"
					onclick="PF('srchDlg').show()" icon="fa fa-search" />

				<p:commandButton id="dynaButton" value="عـرض البريد" type="button"
					icon="fa fa-search" />
				<p:tieredMenu overlay="true" trigger="dynaButton" my="left top"
					at="left bottom" style="width:200px">

					<p:menuitem value=" مفضلة البريد " icon="fa fa-star"
						update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
						action="#{mainManagedBean.mailExecutor.showFavouritinbox(actionEvent)}" />
					<p:menuitem value="عرض بواسطة المرسل" icon="fa fa-users"
						onclick="PF('sendersDlg').show()" />

					<p:menuitem value="بواسطة المجلدات" icon="fa fa-folder"
						onclick="PF('userfoldersDlg').show()" />






					<p:submenu label="بواسطة الحالة" icon="fa fa-check-square-o">
						<p:menuitem value="البريد الغير مقروء " icon="fa fa-star-o"
							update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
							action="#{mainManagedBean.mailExecutor.showUnreadInbox(actionEvent)}" />
						<p:menuitem value="البريد المقروء  " icon="fa fa-star-half-o"
							update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
							action="#{mainManagedBean.mailExecutor.showReadInbox(actionEvent)}" />
					</p:submenu>

					<p:submenu label="بواسطة التوقيت" icon="fa fa-clock-o">
						<p:menuitem icon="fa fa-calendar" value="عرض بريد اليوم "
							update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
							action="#{mainManagedBean.mailExecutor.ShowDailyInbox(actionEvent)}" />

					</p:submenu>


				</p:tieredMenu>


			</f:facet>

			<f:facet name="right">
				<p:commandButton value="تحديث البريد الألكتروني"
					icon="fa fa-refresh"
					action="#{mainManagedBean.mailExecutor.refreshInbox(actionEvent)}"
					update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
					id="refreshbtn" />



				<p:menuButton value="إنشــــاء" rendered="false"
					style="width: 100px;" id="createInboxSelection">
					<p:menuitem value="إنشاء خطاب" action="comment?faces-redirect=true"
						ajax="false" style="float: right;" />
					<p:menuitem value="إنشاء تعميم" rendered="false"></p:menuitem>
					<p:menuitem value="إنشاء مذكرة داخلية" ajax="false"
						action="internalMemo?faces-redirect=true" />
				</p:menuButton>



				<p:commandButton id="dynaButton001" value="إنشاء" type="button"
					icon="fa fa-plus" />
				<p:tieredMenu overlay="true" trigger="dynaButton001" my="left top"
					at="left bottom" style="width:200px">
					<p:menuitem value="إنشاء خطاب" icon="fa fa-edit"
						action="comment?faces-redirect=true" ajax="false"
						style="float: right;" />
					<p:menuitem value="إنشاء تعميم" rendered="false"></p:menuitem>
					<p:menuitem value="إنشاء مذكرة داخلية" style="float: right;"
						icon="fa fa-user" ajax="false"
						action="internalMemo?faces-redirect=true" />
				</p:tieredMenu>




			</f:facet>

		</p:toolbar>

		<p:tabView
			style="direction: rtl;font-size: medium;font-weight: bold;padding: 0px;"
			id="inbox-out-tab">
			<p:tab title="البريد الوارد" id="inboxtab">
				<h:form id="inboxdtform" target="_blank">

					<style type="text/css">
.IMPORTANT-READ {
	background-color: #FFEDED !important;
}

.IMPORTANT-UNREAD {
	background-color: #FFC2C2 !important;
}

.REQUIRED-READ {
	background-color: #EBFFE0 !important;
}

.REQUIRED-UNREAD {
	background-color: #99FF66 !important;
}
</style>

					<p:dataTable value="#{mainManagedBean.mailExecutor.mails}"
						var="inboxitem" id="inboxdt" rowKey="#{inboxitem.wrkId}"
						widgetVar="inbox_dt"
						selection="#{mainManagedBean.mailExecutor.selectedInbox}"
						selectionMode="single" lazy="true"
						rowStyleClass="#{inboxitem.wrkColor}" paginator="true" rows="12"
						emptyMessage="لا يوجد معاملات " rowIndexVar="rowIndex"
						styleClass="myTable"
						filteredValue="#{mainManagedBean.mailExecutor.filteredInbox}"
						style="margin-bottom: 20px;font-size: medium;"
						paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
						<f:facet name="header">
							<h:form id="inboxHeaderForm">
								<p:outputPanel id="inboxheaderpanel">
									<div class="container-fluid" style="direction: rtl;">
										<div class="row">
											<div class="col-md-2 col-sm-2 col-xs-2">
												<p:commandLink value="مفضلة البريد  " process="@this"
													update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
													action="#{mainManagedBean.mailExecutor.showFavouritinbox(actionEvent)}"
													style="padding:0px;padding-right:9px;padding-left:9px;" />
											</div>
											<div class="col-md-2 col-sm-2 col-xs-2">
												<p:commandLink value="البريد اليومي" process="@this"
													update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
													action="#{mainManagedBean.mailExecutor.ShowDailyInbox(actionEvent)}"
													style="padding:0px;padding-right:9px;padding-left:9px;width:100% !important" />
											</div>
											<div class="col-md-3 col-sm-3 col-xs-2">
												<p:commandLink value="الغير مقروء" process="@this"
													update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
													action="#{mainManagedBean.mailExecutor.showUnreadInbox(actionEvent)}"
													style="padding:0px;padding-right:9px;padding-left:9px;" />
												<span style="font-size: smaller;" class="badge"
													id="unread_inbox_lbl">#{mainManagedBean.mailExecutor.unreadInboxCount}</span>
											</div>
											<div class="col-md-3 col-sm-3 col-xs-2">
												<p:commandLink value="المقروء" process="@this"
													update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
													action="#{mainManagedBean.mailExecutor.showReadInbox(actionEvent)}"
													style=";padding:0px;padding-right:9px;padding-left:9px;" />
												<span style="font-size: smaller;" class="badge"
													id="read_inbox_lbl">#{mainManagedBean.mailExecutor.readInboxCount}</span>
											</div>

											<div class="col-md-2 col-sm-2 col-xs-2">
												<p:commandLink value="البريد الوارد" process="@this"
													actionListener="#{mainManagedBean.mailExecutor.refreshInbox}"
													style="padding:0px; padding-right:9px;padding-left:9px;	"
													update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt" />
												<span style="font-size: smaller;" class="badge"
													id="inbox_lbl">#{mainManagedBean.mailExecutor.inboxCount}</span>

											</div>

										</div>
									</div>
								</p:outputPanel>
							</h:form>
						</f:facet>
						<p:ajax event="rowSelect" listener="#{mainManagedBean.editMail}"
							update=":mainForm:includeform:inbox-out-tab:inboxdtform ,:mainForm:includeform:inbox-out-tab,
                                        :mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt,
                                     :mainForm:includeform,:mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt:inboxHeaderForm:inboxheaderpanel"
							process="@this,:mainForm:includeform"
							oncomplete="PF('multiCarDialog').show()">
						</p:ajax>
						<p:column headerText="wrkType" width="5%">
                                    #{inboxitem.wrkType}

                                </p:column>
						<p:column headerText="شـ " width="3%">
                                    #{inboxitem.convWrkTotalSteps}

                                </p:column>
						<p:column headerText="مـ" width="3%">
                                    #{inboxitem.convWrkAttachCount}
                                </p:column>
						<p:column id="senderCol" style="white-space: nowrap;"
							headerText="المُرسل  " width="18%"
							filterBy="#{inboxitem.wrkSender}">
                                    #{inboxitem.wrkSender}
                                </p:column>
						<p:column headerText="التاريخ " width="8%">
							<div style="font-size: 15px; direction: ltr;">
								#{inboxitem.convWrkHdate}</div>
						</p:column>
						<p:column headerText="التوقيت " width="7%">

							<div style="font-size: 16px;">
								#{inboxitem.convWrkCreateTime}</div>
						</p:column>
						<p:column id="topicCol" style="white-space: nowrap;" width="47%"
							headerText="الموضوع " filterBy="#{inboxitem.appTitle}">

							<div id="read-icon" class="fa  fa-check" style="font-size: 14px;" /> #{inboxitem.appTitle} 

                                    <p:tooltip
								for="@(.myTable tr[role=row][data-ri=#{rowIndex}])"
								trackMouse="true" hideEffect="fade"
								value="This is row number #{rowIndex}"
								style="font-size: medium;direction: rtl;max-width: 500px;">
								<h:panelGrid columns="2">
									<p:outputLabel value="الموضوع" style="color: #045491" />
									<p:outputLabel value="#{inboxitem.appTitle}" />
									<p:outputLabel value="التوجية" style="color: #045491" />
									<p:outputLabel value="#{inboxitem.purpose}" />
									<p:outputLabel value="عدد المرفقات " style="color: #045491" />
									<p:outputLabel value="#{inboxitem.convWrkAttachCount}" />
									<p:outputLabel value=" الخطاب ؟" style="color: #045491" />
									<p:outputLabel
										value="#{inboxitem.hasComment == 1 ? 'يوجد خطاب' : ' لا يوجد' }" />

								</h:panelGrid>
								<p:outputLabel value="#{inboxitem.firstComment}" />
							</p:tooltip>
						</p:column>
						<p:column style="white-space: nowrap;text-align: center;"
							headerText="الوارد " width="9%">

							<div style="font-size: 18px;">
								<div class="fa    fa-pencil" style="font-size: 14px;" />
								#{inboxitem.convWrkIncomeNo}
							</div>
						</p:column>
						<p:column width="4%" rendered="false">

							<p:commandLink style="width: 10px;height: 10px;"
								process="inboxdt"
								actionListener="#{mainManagedBean.mailExecutor.archiveInboxRecord(actionEvent)}">

								<div id="arch-icon" class="fa fa-archive"
									style="font-size: 15px;" />
								<f:setPropertyActionListener value="#{inboxitem}"
									target="#{mainManagedBean.mailExecutor.selectedInbox}" />
							</p:commandLink>
						</p:column>

					</p:dataTable>
					<p:dialog widgetVar="srchDlg" closeOnEscape="true"
						resizable="false" header=" بحث في البريد الوارد"
						minimizable="true" style="direction: rtl;" showEffect="explode"
						hideEffect="explode">

						<h:form id="inboxSearchForm">
							<h:panelGrid columns="3" style="direction: rtl;">
								<p:inputText value="#{mainManagedBean.mailExecutor.searchKey}"
									style="font-size: 20px;width: 300px;"
									placeholder="  ..أدخل كلمة البحث" id="srchkey"
									onkeypress="if (event.keyCode == 13) {
                                                        test();
                                                        return false;
                                                    }" />
								<p:remoteCommand name="test"
									process="@this,:mainForm:includeform:inbox-out-tab:inboxdtform:inboxSearchForm:srchkey,:mainForm:includeform:inbox-out-tab:inboxdtform:inboxSearchForm:includeCommentSearchCbx"
									actionListener="#{mainManagedBean.mailExecutor.searchInbox(actionEvent)}"
									update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt" />
								<p:commandButton value="بحث" icon="fa fa-search"
									class="btn btn-default"
									process="@this,:mainForm:includeform:inbox-out-tab:inboxdtform:inboxSearchForm:srchkey,:mainForm:includeform:inbox-out-tab:inboxdtform:inboxSearchForm:includeCommentSearchCbx"
									action="#{mainManagedBean.mailExecutor.searchInbox(actionEvent)}"
									update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt" />
								<p:row>
									<p:selectBooleanCheckbox id="includeCommentSearchCbx"
										style="padding: 7px;"
										value="#{mainManagedBean.mailExecutor.includeCommentSearch}" />
									<p:outputLabel value="تضمين الشروحات  *قد يستهلك وقت أكبر " />
								</p:row>
							</h:panelGrid>
						</h:form>




					</p:dialog>





				</h:form>
			</p:tab>
			<p:tab title="البريد الصادر">
				<p:dataTable value="#{mainManagedBean.mailExecutor.outmails}"
					var="outboxitem" selectionMode="single" paginator="true" rows="12"
					emptyMessage="لا يوجد معاملات " rowKey="#{outboxitem.wrkId}"
					rowIndexVar="outboxrowIndex" lazy="true" id="outboxdt"
					selection="#{mainManagedBean.mailExecutor.selectedOutbox}"
					style="font-size: medium;">
					<p:ajax event="rowSelect"
						listener="#{mainManagedBean.mailExecutor.outboxSelectRow}"
						process="@this,outboxdt"
						update=":mainForm:includeform:inbox-out-tab:outboxpopup:outboxtabview:explaindatatable001,
                                    :mainForm:includeform:inbox-out-tab:outboxdialog

                                    "
						oncomplete="PF('outboxDlg').show()">
					</p:ajax>
					<!--
                            <p:column width="15" styleClass="#{outboxitem.wrkColor}" toggleable="true" >
                                <img src="../resources/images/#{outboxitem.wrkColor}.png" />
                            </p:column>
                            -->
					<f:facet name="header">
						<div class="container-fluid">
							<div class="row">
								<div class="col-md-4">
									<p:commandLink value=" البحث في الصادر "
										onclick="PF('outboxsrchDlg').show()" />
								</div>
								<div class="col-md-4">
									<p:commandLink id="arcComm" value="البريد المؤرشف "
										update=":mainForm:includeform:inbox-out-tab:outboxdt"
										action="#{mainManagedBean.mailExecutor.showArchivedOutBox(actionEvent)}" />
									<p:tooltip for="arcComm" value="قد يأخذ العرض وقت أطول" />
									<span class="badge" id="Archived_outbox_lbl">#{mainManagedBean.mailExecutor.archivedOutboxCount}</span>
								</div>
								<div class="col-md-4">
									<p:commandLink value="البريد الصادر"
										update=":mainForm:includeform:inbox-out-tab:outboxdt"
										action="#{mainManagedBean.mailExecutor.showOutBox(actionEvent)}" />
									<span class="badge" id="outbox_lbl">#{mainManagedBean.mailExecutor.outboxCount}</span>
								</div>
							</div>
						</div>
					</f:facet>
					<p:column style="white-space: nowrap;" headerText="شـ " width="3%">

                                #{outboxitem.convWrkTotalSteps}
                            </p:column>
					<p:column style="white-space: nowrap;" headerText="مـ" width="3%">
                                #{outboxitem.convWrkAttachCount}
                            </p:column>
					<p:column style="white-space: nowrap;" headerText="المرسل اليه"
						width="18%">
                                #{outboxitem.wrkReciever}
                            </p:column>
					<p:column style="white-space: nowrap;" headerText="التاريخ "
						width="8%">
						<div style="font-size: 15px;">#{outboxitem.convWrkHdate}</div>
					</p:column>
					<p:column style="white-space: nowrap;" headerText="التوقيت "
						width="7%">
						<div style="font-size: 16px;">#{outboxitem.convWrkCreateTime}</div>
					</p:column>
					<p:column width="47%" style="white-space: nowrap;"
						headerText="الموضوع ">
                                #{outboxitem.appTitle}
                            </p:column>
					<p:column style="white-space: nowrap;" headerText="التوجيه "
						width="100">
						<div style="font-size: 14px;">#{outboxitem.purpose}</div>
					</p:column>
				</p:dataTable>
				<p:dialog widgetVar="outboxsrchDlg" closeOnEscape="true"
					resizable="false" header=" بحث في البريد الصادر" minimizable="true"
					style="direction: rtl;" showEffect="explode" hideEffect="explode">

					<h:form id="outbxsearchForm">
						<h:panelGrid columns="3" style="direction: rtl;">
							<p:inputText
								value="#{mainManagedBean.mailExecutor.outboxSearchKey}"
								style="font-size: 20px;width: 300px;"
								placeholder="  ..أدخل كلمة البحث" id="OutboxSearchKey"
								onkeypress="if (event.keyCode == 13) {
                                                    test();
                                                    return false;
                                                }" />
							<p:remoteCommand name="test"
								process="@this,
                                                     :mainForm:includeform:inbox-out-tab:outbxsearchForm:OutboxSearchKey,
                                                     :mainForm:includeform:inbox-out-tab:outbxsearchForm:outboxIncludeArchive"
								actionListener="#{mainManagedBean.mailExecutor.SearchOutboxMail(actionEvent)}"
								update=":mainForm:includeform:inbox-out-tab:outboxdt" />
							<p:commandButton value="بحث" icon="fa fa-search"
								class="btn btn-default"
								process="@this,:mainForm:includeform:inbox-out-tab:outbxsearchForm:OutboxSearchKey,
                                                     :mainForm:includeform:inbox-out-tab:outbxsearchForm:outboxIncludeArchive"
								action="#{mainManagedBean.mailExecutor.SearchOutboxMail(actionEvent)}"
								update=":mainForm:includeform:inbox-out-tab:outboxdt" />
							<p:row>
								<p:selectBooleanCheckbox id="outboxIncludeArchive"
									style="padding: 7px;"
									value="#{mainManagedBean.mailExecutor.outboxSearchIncludearchive}" />
								<p:outputLabel value="تضمين البحث داخل المعاملات المؤرشفة" />
							</p:row>
						</h:panelGrid>
					</h:form>
				</p:dialog>
				<p:dialog style="direction: rtl;" resizable="false"
					hideEffect="clip" showEffect="fade" closable="false" modal="true"
					width="900" height="500"
					header="المعاملة :#{mainManagedBean.mailExecutor.selectedOutbox.appTitle}"
					widgetVar="outboxDlg" id="outboxdialog">
					<h:form id="outboxpopup">

						<p:tabView id="outboxtabview">
							<p:tab title="الشروحات ">
								<p:dataList id="explaindatatable001"
									value="#{mainManagedBean.mailExecutor.outboxComments}"
									var="outboxcomm" type="definition"
									style="height: 500px;border: none;"
									emptyMessage="لا يوجد شروحات">
									<f:facet name="header">الشروحات</f:facet>
									<div class="EX_BOX" style="float: left; word-wrap: break-word;">
										<div class="EX_BOX_header">
											<h:panelGrid columns="1">
												<p:outputLabel>
                                                            أرسلت بواسطة #{outboxcomm.fromName}  الي    #{outboxcomm.toName}  في #{outboxcomm.createdIn} 
                                                        </p:outputLabel>
												<p:outputLabel> الغرض : #{outboxcomm.purpose}</p:outputLabel>
											</h:panelGrid>
										</div>
										<div class="EX_BOX_content" style="float: left;">
											#{outboxcomm.comment}</div>
									</div>
								</p:dataList>
							</p:tab>
							<p:tab title="المرفقات">
								<p:tabView value="#{mainManagedBean.mailExecutor.outattList}"
									var="att">
									<p:tab title="مرفق - #{att.attId}">
										<p:row>
                                                    قام بارفاقه  #{att.ownerName} <p:commandButton
												value="تحميل" />
										</p:row>
										<object type="application/pdf" data="#{att.attLink}"
											height="300px" width="100%">
											Your browser can't display pdf, <a
												href="/resources/demo/media/guide.pdf">click</a> to download
											pdf instead.
										</object>
									</p:tab>
								</p:tabView>
							</p:tab>
						</p:tabView>
					</h:form>
					<f:facet name="footer">
						<h:form>
							<p:commandButton value="استرجاع المعاملة " process="@this"
								action="#{mainManagedBean.mailExecutor.retrieveRecordBtnAction(actionEvent)}"
								style="float: right;" class="btn btn-default"
								icon="fa fa-share-square-o"
								update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt,
                                                     :mainForm:includeform:inbox-out-tab:outboxdt" />
							<p:commandButton value=" رجوع الي البريد الصادر "
								icon="fa fa-mail-reply" class="btn btn-default"
								onclick="PF('outboxDlg').hide()" />
						</h:form>

					</f:facet>
				</p:dialog>
			</p:tab>

			<p:tab title="اختيار متعدد" id="multiSelecttab">
				<p:dataTable value="#{mainManagedBean.mailExecutor.mails}"
					var="inboxitem" id="inboxdtMS" rowKey="#{inboxitem.wrkId}"
					widgetVar="inbox_dtMS"
					selection="#{mainManagedBean.mailExecutor.selectedInboxs}"
					paginatorPosition="top" lazy="true" paginator="true" rows="12"
					emptyMessage="لا يوجد معاملات " rowIndexVar="rowIndex"
					style="margin-bottom: 20px;font-size: medium;"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
					<f:facet name="footer">
						<p:commandButton value="تحديد الاجراء المطلوب" id="btn00111"
							update=":mainForm:includeform:inbox-out-tab:msform:msop,:mainForm:includeform:inbox-out-tab:mselectdlgId"
							action="#{mainManagedBean.mailExecutor.MultipleSelectInboxAction(actionEvent)}"
							process="@this,inboxdtMS" />

					</f:facet>

					<p:column headerText="شـ " width="3%">
                                #{inboxitem.convWrkTotalSteps}

                            </p:column>
					<p:column headerText="مـ" width="3%">
                                #{inboxitem.convWrkAttachCount}
                            </p:column>
					<p:column style="white-space: nowrap;" headerText="المُرسل  "
						width="15%">
                                #{inboxitem.wrkSender}
                            </p:column>
					<p:column headerText="التاريخ " width="8%">
						<div style="font-size: 15px; direction: ltr;">
							#{inboxitem.convWrkHdate}</div>
					</p:column>
					<p:column headerText="التوقيت " width="7%">

						<div style="font-size: 16px;">#{inboxitem.wrkCreateTime}</div>
					</p:column>
					<p:column style="white-space: nowrap;" width="40%"
						headerText="الموضوع ">


						<p:tooltip for="@(.myTable tr[role=row][data-ri=#{rowIndex}])"
							trackMouse="true" hideEffect="fade"
							value="This is row number #{rowIndex}"
							style="font-size: medium;direction: rtl;max-width: 500px;">
							<h:panelGrid columns="2">
								<p:outputLabel value="الموضوع" style="color: #045491" />
								<p:outputLabel value="#{inboxitem.appTitle}" />
								<p:outputLabel value="التوجية" style="color: #045491" />
								<p:outputLabel value="#{inboxitem.purpose}" />
								<p:outputLabel value="عدد المرفقات " style="color: #045491" />
								<p:outputLabel value="#{inboxitem.convWrkAttachCount}" />
								<p:outputLabel value=" الخطاب ؟" style="color: #045491" />
								<p:outputLabel
									value="#{inboxitem.hasComment == 1 ? 'يوجد خطاب' : ' لا يوجد' }" />

							</h:panelGrid>
							<p:outputLabel value="#{inboxitem.firstComment}" />
						</p:tooltip>
					</p:column>
					<p:column style="white-space: nowrap;text-align: center;"
						headerText="الوارد " width="9%">

						<div style="font-size: 18px;">
							<div class="fa    fa-pencil" style="font-size: 14px;" />
							#{inboxitem.convWrkIncomeNo}
						</div>
					</p:column>
					<p:column width="4%" rendered="false">

						<p:commandLink style="width: 10px;height: 10px;" process="inboxdt"
							actionListener="#{mainManagedBean.mailExecutor.archiveInboxRecord(actionEvent)}">

							<div id="arch-icon" class="fa fa-archive"
								style="font-size: 15px;" />
							<f:setPropertyActionListener value="#{inboxitem}"
								target="#{mainManagedBean.mailExecutor.selectedInbox}" />
						</p:commandLink>
					</p:column>
					<p:column selectionMode="multiple" width="5%"
						style="text-align:center" />
				</p:dataTable>
				<p:dialog id="mselectdlgId" widgetVar="mselectdlg" modal="true"
					resizable="false"
					header="تحديد الاجراء المطلوب  لعدد  #{mainManagedBean.mailExecutor.selectedInboxsSize} من المعاملات"
					height="160" width="500">
					<h:form id="msform">

						<p:outputPanel id="msop">
							<div class="container-fluid">

								<div class="row">
									<p:selectOneRadio
										value="#{mainManagedBean.mailExecutor.selectSummAction}"
										layout="grid" columns="1" id="summselected">
										<f:selectItem itemLabel="أرشفة المعاملات المحددة "
											itemValue="A" />
										<f:selectItem
											itemLabel="إرسال المعاملات المحدده إلي شخص محدد    "
											itemValue="B" />
										<p:ajax event="change"
											listener="#{mainManagedBean.mailExecutor.changeSummaryAction(abe)}"
											process="@this,summselected"
											update=":mainForm:includeform:inbox-out-tab:msform" />
									</p:selectOneRadio>

								</div>
								<div class="row">
									<p:selectOneMenu id="employeesForMs" style="width: 100%"
										value="#{mainManagedBean.mailExecutor.selectEmployeeForSummaryAction}"
										rendered="#{mainManagedBean.mailExecutor.showDeptEmployees}">
										<f:selectItem itemLabel="أختر موظف من الموظفين" />
										<f:selectItems value="#{mainManagedBean.mailExecutor.empMap}" />
									</p:selectOneMenu>
								</div>
								<div class="row">
									<div class="col-md-2"></div>
									<div class="col-md-8">
										<p:commandButton value="تنفيذ"
											process="@this,employeesForMs,summselected"
											class="label ui-priority-primary "
											action="#{mainManagedBean.mailExecutor.MultiselectBtnAction(actionEvent)}"
											update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt,
                                                                 :mainForm:includeform:inbox-out-tab:outboxdt,
                                                                 :mainForm:includeform:inbox-out-tab:inboxdtMS"
											style="width: 100%" />
									</div>
									<div class="col-md-2"></div>
								</div>
							</div>



						</p:outputPanel>
					</h:form>
				</p:dialog>
				<p:messages autoUpdate="true" />

			</p:tab>
		</p:tabView>



		<p:dialog style="direction: rtl;left: 1px;" showEffect="fade"
			hideEffect="fade" widgetVar="sendersDlg" resizable="false"
			header="حدد جهة الإرسال">
			<h:form id="sendersform">
				<h:panelGrid columns="2" style="font-size: medium;">
					<p:selectOneListbox
						value="#{mainManagedBean.mailExecutor.selectedSender}"
						style="width: 300px;" id="senderListbox" filter="true"
						filterMatchMode="contains">

						<f:selectItems
							value="#{mainManagedBean.mailExecutor.inboxSenderList}" />
						<p:ajax event="change"
							update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
							process="@this,senderListbox"
							listener="#{mainManagedBean.mailExecutor.chnageSenderListBox}" />
					</p:selectOneListbox>
				</h:panelGrid>
			</h:form>
		</p:dialog>

		<p:dialog style="direction: rtl;left: 1px;" showEffect="fade"
			hideEffect="fade" widgetVar="userfoldersDlg" resizable="false"
			header="حدد المجلد">
			<h:form id="userfolders">
				<h:panelGrid columns="2" style="font-size: medium;">
					<p:selectOneListbox
						value="#{mainManagedBean.mailExecutor.selectedUserFolder}"
						style="width: 300px;" id="userFolderListbox" filter="true"
						filterMatchMode="contains">

						<f:selectItems value="#{mainManagedBean.mailExecutor.userFolders}" />
						<p:ajax event="change"
							update=":mainForm:includeform:inbox-out-tab:inboxdtform:inboxdt"
							process="@this,userFolderListbox"
							listener="#{mainManagedBean.mailExecutor.chnageUserFolderListBox}" />
					</p:selectOneListbox>
				</h:panelGrid>
			</h:form>
		</p:dialog>
		<p:ajaxStatus onstart="PF('statusDialog').show()"
			onsuccess="PF('statusDialog').hide()" />
                 
                <p:dialog widgetVar="statusDialog" modal="true"
			draggable="false" closable="false" resizable="false"
			showHeader="false">
                        <p:graphicImage
				value="../resources/images/loadingT.gif" />
		</p:dialog>
		<p:growl id="gr" autoUpdate="true" showDetail="false" />
		<p:idleMonitor timeout="10000000">
			<p:ajax event="idle"
				listener="#{mainManagedBean.mailExecutor.onIdle1}" update="gr" />
		</p:idleMonitor>

	</h:body>
</f:view>
</html>
