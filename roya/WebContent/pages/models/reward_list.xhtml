<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<f:view>
	<script type="text/javascript">
		window.onload = window.history.forward(0);
	</script>
	<br />

	<h:body>

		<ui:composition template="/template.xhtml">
<!-- 			<p:growl autoUpdate="true" showDetail="false" /> -->

			<ui:define name="content">
				<h:form id="includeform">
					<p:messages autoUpdate="true" closable="true"></p:messages>
					<div align="left">
					<p:commandButton value="المكافئات" ajax="false"
											style="float: left !important;"
											actionListener="#{rewardBean.dowloadRewardFile}"
											onclick="PrimeFaces.monitorDownload(start, stop);"
											icon="ui-icon-arrowthick-1-s">
											<p:fileDownload value="#{rewardBean.file}" />
										</p:commandButton>
					</div>
					<br></br>
					<div class="card card-w-title"
						 dir="rtl">
						
						<div class="col-lg-12" style="background-color: white;">
						<div style="color: color: #428bca">
						
							<h3 class="page-header"
								style="margin: 0px 0 20px ! important; color: #428bca"></h3>
							<div class="row">
								<h:panelGroup id="details_data">
									<div class="ui-g">
										
										<div  class="ui-g-1">
												<p:outputLabel value="الموظف" styleClass="btxt" />
										</div>
								        <div class="ui-g-3">
											<p:selectOneMenu style="width:90%;" id="empNBList"
												value="#{rewardBean.employerNB}">
												<f:selectItem itemLabel="الكل" itemValue="0"></f:selectItem>
												<f:selectItems value="#{rewardBean.employersList}" var="emp"
													itemValue="#{emp.employeNumber}"
													itemLabel="#{emp.firstName} #{emp.secondName} #{emp.thirdName} #{emp.forthName}" />
												<f:ajax render="data" execute="empNBList" event="change"
													listener="#{rewardBean.loadStatus}" />
											</p:selectOneMenu>
										</div>
										
											<div style="width: 100px" class="ui-g-1">
												<p:outputLabel style="margin-right:15px;" value="الشهر"
													styleClass="btxt"></p:outputLabel>
											</div>
										<div class="ui-g-2">	
											<p:selectOneMenu required="true" style="width:200px;"
												id="selectedmonth" value="#{rewardBean.month}">
												<f:selectItem itemLabel="اختر الشهر" itemValue="" />
												<f:selectItems value="#{deputationTrainingBean.listMonth}"
													var="months" itemLabel="#{months.nameAr} #{months.id}"
													itemValue="#{months.id}" />
												<f:ajax render="data" execute="empNBList" event="change"
													listener="#{rewardBean.loadMonthYearStatus}" />

											</p:selectOneMenu>
										</div>

										
										<div style="width: 100px" class="ui-g-1">
												<p:outputLabel style="margin-right:15px;" value="السنه"
													styleClass="btxt"></p:outputLabel>
										</div>
										<div class="ui-g-2">
											<p:spinner id="minMax" value="#{rewardBean.year}" min="1435" 
												max="1500">
												<f:ajax render="data" execute="empNBList" event="change"
													listener="#{rewardBean.loadMonthYearStatus}" />
											</p:spinner>
										</div>
										
										<br></br> <br></br> <br></br>

										<p:dataTable id="data" var="lst" value="#{rewardBean.list}">


											<p:column headerText="الشهر" >
												<center>
													<h:outputText value="#{lst.month}" />
												</center>
											</p:column>

											<p:column headerText="السنه ">
												<center>
													<h:outputText value="#{lst.year}" />
												</center>
											</p:column>

											<p:column headerText="المبلغ">
												<center>
													<h:outputText value="#{lst.amount}" />
												</center>
											</p:column>

											<p:column headerText="نوع المكافاه">
												<center>
													<h:outputText value="#{lst.type}" />
												</center>
											</p:column>
										</p:dataTable>
									</div>

								</h:panelGroup>
							</div>
						</div>
					</div>
					</div>

				</h:form>

			</ui:define>
		</ui:composition>



	</h:body>
</f:view>
</html>
