<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
	<link href="Css/style.css" rel="stylesheet" type="text/css"></link>
	<link href="../resources/css/purecss/pure-min.css" rel="stylesheet"
		type="text/css"></link>

	<link rel="stylesheet" type="text/css"
		href="#{facesContext.externalContext.requestContextPath}/resources/css/bootstrap-arabic.css" />
	<link rel="stylesheet" type="text/css"
		href="#{facesContext.externalContext.requestContextPath}/resources/css/style.css" />

	<script type="text/javascript">
		window.onload = window.history.forward(0);
	</script>
	<style>
</style>
</h:head>
<ui:composition template="/pages/menuBar.xhtml">


	<ui:define name="content">

		<div>

			<h:form id="includeform">


				<p:messages autoUpdate="true" closable="true"></p:messages>
				<div class="col-lg-12"
					style="background-color: white; border-top: 5px solid #428BCA">
					<br />
					<div style="color: color: #428bca">
						<h3 class="page-header"
							style="margin: 0px ! important; color: #428bca">#{msg['new.build.wall']}
						</h3>
					</div>

					<div class="panel-body">
						<div class="row">
							<div class="col-md-12">

								<div class="row">
									<div class="col-md-2">
										<h:outputLabel value="#{msg['identity']}" styleClass="btxt" />
									</div>
									<div class="col-md-2">
										<h:inputText
											value="#{NewBuildingWallBean.newBuilding.licWallAplOwner}"
											styleClass="form-control" maxlength="10">
											<f:validator validatorId="nationalIdValidator" />
											<p:ajax event="blur" update="name" process="@this"
												listener="#{NewBuildingWallBean.loadFromArcPeople}">
											</p:ajax>
										</h:inputText>
									</div>

									<div class="col-md-2">
										<h:outputLabel value="#{msg['name']}" styleClass="btxt" />
									</div>
									<div class="col-md-2">
										<h:outputLabel id="name"
											value="#{NewBuildingWallBean.owner.completeName}" />
									</div>

								</div>

								<br />
								<div class="row">
									<div class="col-md-2">
										<h:outputLabel value="#{msg['phone.number']}"
											styleClass="btxt" />
									</div>
									<div class="col-md-2">
										<h:inputText
											value="#{NewBuildingWallBean.newBuilding.licWallAplMobile}"
											styleClass="form-control">
											<f:validator validatorId="utilities.PhoneNumberValidator" />
										</h:inputText>
									</div>

									<div class="col-md-2">
										<h:outputLabel value="#{msg['request.type']}"
											styleClass="btxt" />
									</div>
									<div class="col-md-2">
										<h:selectOneMenu id="empList" styleClass="form-control"
											value="#{NewBuildingWallBean.newBuilding.licWallReqType}">
											<f:selectItem itemLabel="إختر نوع الطلب" itemValue="" />
											<f:selectItems
												value="#{loadingDataBean.buildingPaperTypeList}" var="bld"
												itemLabel="#{bld.name}" itemValue="#{bld.id}" />
										</h:selectOneMenu>
									</div>
								</div>

								<br />
								<div class="row">
									<div class="col-md-2">
										<h:outputLabel value="#{msg['cheque.Number']}"
											styleClass="btxt" />
									</div>
									<div class="col-md-2">
										<h:inputText
											value="#{NewBuildingWallBean.newBuilding.licWallSakNo}"
											styleClass="form-control">
										</h:inputText>
									</div>

									<div class="col-md-2">
										<h:outputLabel value="#{msg['cheque.Date']}" styleClass="btxt" />
									</div>
									<div class="col-md-2">
										<p:inputMask
											value="#{NewBuildingWallBean.newBuilding.licWallSakDate}"
											mask="99/99/9999" dir="ltr" size="5">
											<f:validator validatorId="utilities.UmmAlQUraValidator" />
										</p:inputMask>
									</div>

									<div class="col-md-2">
										<h:outputLabel value="#{msg['his.source']}" styleClass="btxt" />
									</div>
									<div class="col-md-2">
										<h:inputText
											value="#{NewBuildingWallBean.newBuilding.licWallSakSource}"
											styleClass="form-control">
										</h:inputText>
									</div>



								</div>
								<br /> <br />
								<div class="row">
									<div class="col-md-7">
										<br></br>

										<div class="row">
											<div class="col-md-2">
												<h:outputLabel styleClass="btxt" value=" الارفاق " />

											</div>
											<div class="col-md-10">
												<p:fileUpload id="upload"
													widgetVar="newCommentFileUpload100" multiple="true"
													update="att-list"
													fileUploadListener="#{NewBuildingWallBean.uploadFile}"
													uploadLabel="ارفاق" mode="advanced" cancelLabel="إلغاء"
													label="تحديد المرفق" sizeLimit="300000000"
													previewWidth="30" />
											</div>
											<h:commandButton id="btn_1" value="uploadFiles"
												style="display: none">
												<f:ajax event="click"
													listener="#{NewBuildingWallBean.refreshFilesUploaded}"
													render="att-list">
												</f:ajax>
											</h:commandButton>
										</div>
										<br></br>
										<div class="row">
											<div class="col-md-2">
												<h:outputLabel value="  " />

											</div>
											<div>
												<ul>
													<h:panelGroup id="att-list">
														<br></br>
														<ui:repeat var="attach"
															value="#{NewBuildingWallBean.attachList}">
															<div class="row">
																<div class="col-md-5">
																	<h:outputLabel value="#{attach.attachRealName}" />
																</div>
																<div class="col-md-1">
																	<h:commandButton class="btn btn-danger"
																		immediate="true" render="att-list" value="إلغاء"
																		actionListener="#{NewBuildingWallBean.deleteAttchFile(attach.attachRealName)}">
																	</h:commandButton>
																</div>
															</div>
														</ui:repeat>
													</h:panelGroup>
												</ul>
											</div>
										</div>
									</div>
									<div class="col-md-5">

										<br></br> <a
											href="webrun:C:\\WINDOWS\\ARCHIVING\\UploadToFTP.bat"
											id="FileLoderID" class="btn btn-primary"
											style="display: none; float: left; margin-left: 84px;"
											onclick="notVisibleDIv()"> تحميل المرفقات </a>
										<div style="display: inline;">
											<a
												href="webrun:C:\\WINDOWS\\ARCHIVING\\ScanMultipage64bit.exe"
												class="btn btn-primary icon-pencil" onclick="visibleDIv()">
												<i class="material-icons">scanner</i>
											</a>
											<div class="col-md-6" id="divError"
												style="display: none; float: left;">
												<h:outputLabel value=" يجب تحميل المرفقات بعد إنتهاء المسح"
													style="color:red"></h:outputLabel>
											</div>

										</div>


									</div>

									<div class="row">
										<div class="col-md-12">

											<h:commandButton value="#{msg['back']}" action="mails"
												immediate="true"
												style="float:left;font-family: kufi !important;margin-left: 5px;margin-right: 5px;"
												class="btn btn-primary">
												<f:ajax execute="@form" />
											</h:commandButton>

											<h:commandButton value="#{msg['send']}"
												style="float:left;font-family: kufi !important;margin-left: 5px;margin-right: 5px;"
												styleClass="btn btn-primary"
												actionListener="#{NewBuildingWallBean.saveAction}">
												<f:ajax execute="@form" render="@form"></f:ajax>
											</h:commandButton>
										</div>

									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</h:form>
		</div>
		<script>
			function visibleDIv() {
				document.getElementById("FileLoderID").style.display = "block";
				document.getElementById("divError").style.display = "block";
			}
			function notVisibleDIv() {

				document.getElementById("divError").style.display = "none";
				document.getElementById("FileLoderID").style.display = "none";
				document.getElementById("includeform:btn_1").click();
			}
		</script>
	</ui:define>
</ui:composition>
</html>
