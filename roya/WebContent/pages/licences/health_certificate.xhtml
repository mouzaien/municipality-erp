<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:secc="http://www.springframework.org/security/tags">
<h:body>
	<ui:composition template="/template.xhtml">
		<ui:define name="content">
			<h:form id="includeform">
				<p:messages autoUpdate="true" closable="true"></p:messages>
				<p:growl id="msg" autoUpdate="true"></p:growl>
				<div align="left" class="image-box-footer">
					<!-- 					<p:commandButton value="#{msg['back']}" action="mails" -->
					<!-- 						immediate="true"> -->
					<!-- 						<f:ajax execute="@form"></f:ajax> -->
					<!-- 					</p:commandButton> -->
					<!-- 					<p:spacer height="10px" /> -->
					<!-- 					<p:commandButton value="#{msg['accept']}" styleClass="cyan-btn" -->
					<!-- 						action="#{healthCertificateBean.acceptHealthLicenceAction}"> -->
					<!-- 						<f:ajax execute="@form"></f:ajax> -->
					<!-- 					</p:commandButton> -->
					<!-- 					<p:spacer height="10px" /> -->
					<!-- 					<p:commandButton value=" #{msg['consult']}" styleClass="purple-btn" -->
					<!-- 						action="#{healthCertificateBean.printDocumentAction}"> -->
					<!-- 						<f:ajax execute="@form"></f:ajax> -->
					<!-- 					</p:commandButton> -->
					<p:commandButton value="#{msg['save']}" styleClass="cyan-btn"
						icon="ui-icon-save" update="print,application_id"
						action="#{healthCertificateBean.acceptHealthLicenceAction}">
						<f:ajax execute="@form"></f:ajax>
					</p:commandButton>
					<p:spacer height="10" />
					<p:commandButton id="print" value="#{msg['print']}"
						styleClass="purple-btn" ajax="false"
						onclick="this.form.target='_blank'" icon="ui-icon-print"
						disabled="#{!healthCertificateBean.enaplePrint}"
						action="#{healthCertificateBean.printReportAction}"
						immediate="true">
					</p:commandButton>
				</div>
				<br />
				<div class="card card-w-title" dir="rtl">
					<h1 style="color: #7CB342; text-align: center">بيانات الشهادة</h1>
					<h3 class="page-header" style="color: #428bca">#{msg['request.data']}
					</h3>
					<div class="ui-g">
						<div class="ui-g-1">
							<h:outputLabel value="شهادة سابقة" />
						</div>
						<div class="ui-g-3">
							<p:selectOneMenu value="#{healthCertificateBean.helthApplId}"
								style="width: 100%" filter="true" filterMatchMode="contains">
								<f:selectItem itemLabel="الكل" itemValue="-1" />
								<f:selectItems var="h"
									value="#{healthCertificateBean.healthLicList}"
									itemLabel="#{h.applicationOwner} - #{h.appOwnerName}"
									itemValue="#{h.applicationId}" />
								<p:ajax update="@form"
									listener="#{healthCertificateBean.loadhealthLicListByApplId}" />
							</p:selectOneMenu>
						</div>
					</div>
					<div class="ui-g">
						<div class="ui-g-1">
							<h:outputLabel value="رقم الشهادة" />
						</div>
						<div class="ui-g-2">
							<h:outputLabel style="width:100%" id="application_id"
								validatorMessage="#{msg['error.NationalId']}"
								value="#{healthCertificateBean.healthCertificate.applicationId}" />
						</div>
						<div class="ui-g-1">
							<h:outputLabel value="تاريخ الفحص" />
						</div>
						<div class="ui-g-2">
							<p:inputText id="incomeDate" style="width:100%" required="true"
								requiredMessage="أدخل تاريخ الفحص"
								validatorMessage="#{msg['error.NationalId']}"
								value="#{healthCertificateBean.healthCertificate.applicationHDate}"
								onfocus="loadCalendar();"
								styleClass="form-control form-controlCal">
								<!--  value="#{healthCertificateBean.healthCertificate.healthArchiveLicence.id.arcRecord.incomeHDate}" -->
								<f:validator validatorId="utilities.UmmAlQUraValidator" />
							</p:inputText>
						</div>
						<div class="ui-g-1">
							<h:outputLabel value="نوع الهوية" />
						</div>
						<div class="ui-g-2">
							<p:selectOneMenu style="width:100%" filter="true"
								filterMatchMode="contains" required="true"
								requiredMessage="أدخل نوع الهوية"
								value="#{healthCertificateBean.healthCertificate.applicationType}">
								<!--  value="#{healthCertificateBean.healthCertificate.arcPeople.paperType}"> -->
								<f:selectItem itemLabel="إختر نوع الإثبات"
									noSelectionOption="true" />
								<f:selectItem itemLabel="سجل مدني / هوية" itemValue="0" />
								<!--  <f:selectItem itemLabel="سجل تجاري" itemValue="1" /> -->
								<f:selectItem itemLabel="إقامة" itemValue="2" />
								<f:selectItem itemLabel="جواز سفر" itemValue="3" />
							</p:selectOneMenu>
						</div>
						<div class="ui-g-1">
							<h:outputLabel value="رقم الهوية" />
						</div>
						<div class="ui-g-2">
							<p:inputText style="width:100%" maxlength="10" required="true"
								requiredMessage="أدخل رقم الهوية"
								value="#{healthCertificateBean.healthCertificate.applicationOwner}">
								<f:validator validatorId="nationalIdValidator" />
							</p:inputText>
							<!--  value="#{healthCertificateBean.healthCertificate.arcPeople.nationalId}" /> -->
						</div>
					</div>
					<div class="ui-g">
						<div class="ui-g-1">
							<h:outputLabel value="#{msg['name']}" />
						</div>
						<div class="ui-g-2">
							<p:inputText style="width:100%" required="true"
								requiredMessage="أدخل الإسم"
								value="#{healthCertificateBean.healthCertificate.appOwnerName}" />
							<!-- value="#{healthCertificateBean.healthCertificate.arcPeople.completeName}" /> -->
						</div>
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="#{msg['her.date']}" /> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:inputText   style="width:100%" -->
						<!-- 								   -->
						<!-- 								value="#{healthCertificateBean.healthCertificate.arcPeople.idDate}" /> -->
						<!-- 						</div> -->
						<div class="ui-g-1">
							<h:outputLabel value="#{msg['work']}" />
						</div>
						<div class="ui-g-2">
							<!--   <p:inputText   -->
							<!-- 	    -->
							<!-- 	 value="#{healthCertificateBean.healthCertificate.jobId}" /> -->
							<p:selectOneMenu id="work" style="width:80%" filter="true"
								filterMatchMode="contains" required="true"
								requiredMessage="أدخل المهنة"
								value="#{healthCertificateBean.healthCertificate.jobId}">
								<!-- 								value="#{healthCertificateBean.healthCertificate.healthCenter.id}"> -->
								<f:selectItem itemLabel="إختر المهنة" noSelectionOption="true" />
								<f:selectItems var="item"
									value="#{healthCertificateBean.hlthLicJobsList}"
									itemLabel="#{item.name}" itemValue="#{item.id}" />
							</p:selectOneMenu>
							<p:spacer height="10"></p:spacer>
							<p:commandButton icon="ui-icon ui-icon-add" process="@this"
								immediate="true" oncomplete="PF('add_job_dlg').show()">
							</p:commandButton>
						</div>
						<div class="ui-g-1">
							<h:outputLabel value="مصدر الهوية" />
						</div>
						<div class="ui-g-2">
							<p:selectOneMenu style="width:100%" filter="true"
								filterMatchMode="contains"
								value="#{healthCertificateBean.healthCertificate.apllOwnerSource}">
								<f:selectItem itemLabel="إختر مصدر الهوية"
									noSelectionOption="true" />
								<f:selectItem itemLabel="المذنب" itemValue="0" />
								<f:selectItem itemLabel="عنيزة" itemValue="1" />
							</p:selectOneMenu>
						</div>
						<div class="ui-g-1">
							<h:outputLabel value="النوع / الجنس" />
						</div>
						<div class="ui-g-2">
							<p:selectOneMenu style="width:100%" filter="true"
								filterMatchMode="contains" required="true"
								requiredMessage="أدخل النوع/ الجنس"
								value="#{healthCertificateBean.healthCertificate.gender}">
								<f:selectItem itemLabel="إختر الجنس" noSelectionOption="true" />
								<f:selectItem itemLabel="ذكر" itemValue="1" />
								<f:selectItem itemLabel="أنثي" itemValue="2" />
							</p:selectOneMenu>
						</div>
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="#{msg['job']}" /> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:inputText   style="width:100%" -->
						<!-- 								   -->
						<!-- 								value="#{healthCertificateBean.healthCertificate.job.name}" /> -->
						<!-- 						</div> -->
					</div>
					<div class="ui-g">

						<div class="ui-g-1">
							<h:outputLabel value="#{msg['nationality']}" />
						</div>
						<div class="ui-g-2">
							<!-- 							<p:inputText style="width:100%" -->
							<!-- 								value="#{healthCertificateBean.healthCertificate.arcPeople.nationality.nationalityName}" /> -->

							<p:selectOneMenu id="nationality" filter="true" style="width:80%"
								required="true" requiredMessage="أدخل الجنسية"
								value="#{healthCertificateBean.healthCertificate.kafeelNationalId}"
								filterMatchMode="contains">
								<!-- 	  value="#{healthCertificateBean.healthCertificate.arcPeople.nationality.nationalityName}" -->
								<f:selectItem itemLabel="اختر الجنسية" itemValue="" />
								<f:selectItems value="#{healthCertificateBean.listNationality}"
									var="natios" itemLabel="#{natios.nationalityName}"
									itemValue="#{natios.id}" />
							</p:selectOneMenu>

							<p:spacer height="10"></p:spacer>
							<p:commandButton icon="ui-icon ui-icon-add" process="@this"
								immediate="true" oncomplete="PF('add_Nationality_dlg').show()">
							</p:commandButton>
						</div>
						<div class="ui-g-1">
							<h:outputLabel value="اسم الكفيل" />
						</div>
						<div class="ui-g-2">
							<p:inputText style="width:100%" required="true"
								requiredMessage="أدخل اسم الكفيل"
								value="#{healthCertificateBean.healthCertificate.kafeelName}" />
						</div>
						<div class="ui-g-1">
							<h:outputLabel value="رقم هوية الكفيل" />
						</div>
						<div class="ui-g-2">
							<p:inputText style="width:100%" maxlength="10" required="true"
								requiredMessage="أدخل رقم هوية الكفيل"
								value="#{healthCertificateBean.healthCertificate.kafeelApllNumber}">
								<f:validator validatorId="nationalIdValidator" />
							</p:inputText>
						</div>
						<div class="ui-g-1">
							<h:outputLabel value="رقم جوال الكفيل" />
						</div>
						<div class="ui-g-2">
							<p:inputText style="width:100%" required="true"
								requiredMessage="أدخل رقم جوال الكفيل" maxlength="12"
								value="#{healthCertificateBean.healthCertificate.kafeelPhoneNumber}">
								<f:validator validatorId="utilities.PhoneNumberValidator" />
							</p:inputText>

						</div>
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="#{msg['licence.number']}" /> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:selectOneMenu   style="width:100%" -->
						<!-- 								   filter="true" -->
						<!-- 								filterMatchMode="contains" -->
						<!-- 								value="#{healthCertificateBean.licNo}"> -->
						<!-- 								 value="#{healthCertificateBean.healthCertificate.licenceId}" -->
						<!-- 								<f:selectItem itemLabel="إختر الرخصة" noSelectionOption="true" /> -->
						<!-- 								<f:selectItems var="item" -->
						<!-- 									value="#{healthCertificateBean.allLicencesList}" -->
						<!-- 									itemLabel="#{item.licOwnerName} - #{item.licNo} " -->
						<!-- 									itemValue="#{item.licNo}" /> -->
						<!-- 								<p:ajax listener="#{healthCertificateBean.updateTrdName}" -->
						<!-- 									update="trdLicenceName" /> -->
						<!-- 							</p:selectOneMenu> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="الإسم التجاري" /> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:inputText   style="width:100%" -->
						<!-- 								id="trdLicenceName"    -->
						<!-- 								value="#{healthCertificateBean.licTrdName}" /> -->
						<!-- 							 value="#{healthCertificateBean.healthCertificate.trdLicenceName}" -->
						<!-- 						</div> -->
					</div>
					<div class="ui-g">
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="تاريخ التطعيم" /> -->
						<!-- 							 "#{msg['typhoid.date']}" -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:inputText id="tefodDate" style="width:100%" -->
						<!-- 								value="#{healthCertificateBean.healthCertificate.tefodDate}" -->
						<!-- 								onfocus="loadCalendar();" -->
						<!-- 								styleClass="form-control form-controlCal"> -->
						<!-- 								<f:validator validatorId="utilities.UmmAlQUraValidator" /> -->
						<!-- 							</p:inputText> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="تاريخ تطعيم الشوكية" styleClass="btxt" /> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:inputText id="hommaDate" style="width:100%" -->
						<!-- 								value="#{healthCertificateBean.healthCertificate.hommaDate}" -->
						<!-- 								onfocus="loadCalendar();" -->
						<!-- 								styleClass="form-control form-controlCal"> -->
						<!-- 								<f:validator validatorId="utilities.UmmAlQUraValidator" /> -->
						<!-- 							</p:inputText> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="#{msg['health.center']}" /> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:selectOneMenu style="width:100%" filter="true" -->
						<!-- 								filterMatchMode="contains" required="true" -->
						<!-- 								requiredMessage="أدخل المركز الصحي" -->
						<!-- 								value="#{healthCertificateBean.healthCertificate.medicalCenterId}"> -->
						<!-- 								<f:selectItem itemLabel="إختر المركز" noSelectionOption="true" /> -->
						<!-- 								<f:selectItems var="item" -->
						<!-- 									value="#{healthCertificateBean.hlthLicCenterList}" -->
						<!-- 									itemLabel="#{item.name}" itemValue="#{item.id}" /> -->
						<!-- 							</p:selectOneMenu> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="#{msg['address']}" /> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:inputText   style="width:100%" -->
						<!-- 								   -->
						<!-- 								value="#{healthCertificateBean.healthCertificate.trdLicenceAddress}" /> -->
						<!-- 						</div> -->
					</div>
					<div class="ui-g">
						<!-- 		/////////////////////////////// التواريييييييخ ////////////		-->
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="#{msg['authorization.start.date']}" -->
						<!-- 								styleClass="btxt" /> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:inputText id="resultStartDate" style="width:100%" -->
						<!-- 								value="#{healthCertificateBean.healthCertificate.resultStartDate}" -->
						<!-- 								onfocus="loadCalendar();" required="true" -->
						<!-- 								requiredMessage="أدخل تاريخ البداية" -->
						<!-- 								styleClass="form-control form-controlCal"> -->
						<!-- 								<f:validator validatorId="utilities.UmmAlQUraValidator" /> -->
						<!-- 							</p:inputText> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="#{msg['authorization.end.date']}" -->
						<!-- 								styleClass="btxt" /> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:inputText id="resultEndDate" style="width:100%" -->
						<!-- 								value="#{healthCertificateBean.healthCertificate.resultEndDate}" -->
						<!-- 								onfocus="loadCalendar();" required="true" -->
						<!-- 								requiredMessage="أدخل تاريخ النهاية" -->
						<!-- 								styleClass="form-control form-controlCal"> -->
						<!-- 								<f:validator validatorId="utilities.UmmAlQUraValidator" /> -->
						<!-- 							</p:inputText> -->
						<!-- 						</div> -->
						<!-- 						///////////////////////////////////////////////////// -->
						<!-- 						<div class="ui-g-1"> -->
						<!-- 							<h:outputLabel value="#{msg['consultation.result']}" -->
						<!-- 								styleClass="btxt" /> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-g-2"> -->
						<!-- 							<p:selectOneMenu id="requestType" filter="true" -->
						<!-- 								filterMatchMode="contains" -->
						<!-- 								value="#{healthCertificateBean.healthCertificate.checkResult}" -->
						<!-- 								style="width:100%; dir:rtl;"> -->
						<!-- 								<f:selectItem itemLabel="#{msg['worthy']}" itemValue="1" /> -->
						<!-- 								<f:selectItem itemLabel="#{msg['not.worthy']}" itemValue="0" /> -->
						<!-- 							</p:selectOneMenu> -->


						<div class="ui-g-1">
							<h:outputLabel value="#{msg['health.center']}" />
						</div>
						<div class="ui-g-2">
							<p:selectOneMenu style="width:100%" filter="true"
								filterMatchMode="contains" required="true"
								requiredMessage="أدخل المركز الصحي"
								value="#{healthCertificateBean.healthCertificate.medicalCenterId}">
								<f:selectItem itemLabel="إختر المركز" noSelectionOption="true" />
								<f:selectItems var="item"
									value="#{healthCertificateBean.hlthLicCenterList}"
									itemLabel="#{item.name}" itemValue="#{item.id}" />
							</p:selectOneMenu>
						</div>

						<div class="ui-g-1">

							<h:outputLabel value="#{msg['owner.picture']}" />
						</div>
						<div class="ui-g-5">

							<p:fileUpload multiple="false" auto="true" style="width:100%"
								update="image_name"
								fileUploadListener="#{healthCertificateBean.fileUpload}"
								uploadLabel="ارفاق" cancelLabel="إلغاء" label="تحديد المرفق"
								previewWidth="0" process="@this" sizeLimit="300000000">

								<!-- 								<p:graphicImage id="image_contant" height="200" width="200" -->
								<!-- 									value="#{healthCertificateBean.image}" /> -->

							</p:fileUpload>
							<h:outputLabel id="image_name"
								value="#{healthCertificateBean.uploadedFileName}"></h:outputLabel>
						</div>
						<br />
					</div>
					<!-- 					<h:commandButton value="#{msg['print']}" -->
					<!-- 						style="float:left;font-size: 10px !important;font-family: kufi !important;margin-left: 5px;margin-right: 5px;" -->
					<!-- 						styleClass="btn btn-primary" action="#{healthCertificateBean.}"> -->
					<!-- 						<f:ajax execute="@form"></f:ajax> -->
					<!-- 					</h:commandButton> -->


					<!--  	<div class="ui-g"></div> -->

					<p:dialog widgetVar="add_job_dlg" id="add_job_dlgId"
						header="إضافة مهنة" width="50%" hideEffect="fade"
						style="text-aling: center'" showEffect="explode" dir="rtl"
						modal="true" resizable="false">
						<div class="ui-g">
							<div class="ui-g-2">
								<p:outputLabel value="إسم المهنة" styleClass="btxt" />
							</div>
							<div class="ui-g-6">
								<p:inputText value="#{healthCertificateBean.newHlthLicJob}"
									style="width: 100%">
									<p:ajax process="@this" update="@this"></p:ajax>
								</p:inputText>
							</div>
						</div>

						<div class="image-box-footer" align="left">
							<p:commandButton value="حفظ" styleClass="btn btn-primary"
								update=":includeform:work" immediate="true"
								action="#{healthCertificateBean.saveHlthLicJobs}"
								oncomplete="PF('add_job_dlg').hide();">
							</p:commandButton>
						</div>
					</p:dialog>

					<p:dialog widgetVar="add_Nationality_dlg"
						id="add_Nationality_dlgId" header="إضافة جنسية" width="50%"
						hideEffect="fade" style="text-aling: center'" showEffect="explode"
						dir="rtl" modal="true" resizable="false">
						<div class="ui-g">
							<div class="ui-g-2">
								<p:outputLabel value="إسم الجنسية" styleClass="btxt" />
							</div>
							<div class="ui-g-6">
								<p:inputText value="#{healthCertificateBean.newNationality}"
									style="width: 100%">
									<p:ajax process="@this" update="@this"></p:ajax>
								</p:inputText>
							</div>
						</div>

						<div class="image-box-footer" align="left">
							<p:commandButton value="حفظ" styleClass="btn btn-primary"
								update=":includeform:nationality" immediate="true"
								action="#{healthCertificateBean.saveNationality}"
								oncomplete="PF('add_Nationality_dlg').hide();">
							</p:commandButton>
						</div>
					</p:dialog>
				</div>

			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>