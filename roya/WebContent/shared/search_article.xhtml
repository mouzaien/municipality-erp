<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view>
	<h:head>
		<f:metadata>
			<f:viewAction action="#{exchangeRequestBean.searchArticles}"
				phase="APPLY_REQUEST_VALUES" />
		</f:metadata>

		<!-- 		<link rel="apple-touch-icon" href="apple-touch-icon.png"></link> -->


		<!-- 		<link rel="stylesheet" -->
		<!-- 			href="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/css/bootstrap/bootstrap.min.css"></link> -->
		<!-- 		<link rel="stylesheet" -->
		<!-- 			href="#{facesContext.externalContext.requestContextPath}/resources/css/PFDataTableCustomize.css"></link> -->
		<script
			src="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/js/vendor/modernizr-2.8.3.min.js"></script>
		<!-- <style> -->
		<!-- /* body .ui-paginator .ui-paginator-pages a{ */ -->

		<!-- /* color:#2196F3; */ -->
		<!-- /* background-color: #9fc4a1; */ -->

		<!-- /* } */ -->

		<!-- /* body .ui-state-active, body .ui-state-highlight{ */ -->
		<!-- /* background-color : #673AB7 !important */ -->

		<!-- /* } */ -->

		<!-- /* body .ui-paginator .ui-paginator-prev { */ -->
		<!-- /*  background-image: url(../resources/images/icon-back.png) !important; */ -->
		<!-- /*  background-size: 25px 26px; */ -->
		<!-- /* } */ -->
		<!-- /* body .ui-paginator .ui-paginator-next{ */ -->
		<!-- /*  background-image: url(../resources/images/preview.png) !important; */ -->
		<!-- /*  background-size: 25px 26px; */ -->
		<!-- /* } */ -->
		<!-- </style> -->
		<style>
.bodyt {
	height: 200px;
	overflow: auto
}
</style>
	</h:head>
	<ui:composition template="/template.xhtml">

		<ui:define name="content">
			<h:form id="includeform">
				<p:messages autoUpdate="true" closable="true"></p:messages>
				<div class="image-box-footer">

					<p:commandButton value="طباعة" ajax="false"
						onclick="this.form.target='_blank'" styleClass="purple-btn"
						icon="ui-icon ui-icon-print"
						action="#{exchangeRequestBean.printSearch_ArticleReportAction}">
					</p:commandButton>
				</div>
				<br />
				<div class="card card-w-title" dir="rtl">



					<h1 style="color: #7CB342; text-align: center;">
						الأصناف <span class="fa fa-fw fa-bitbucket-square "></span>
					</h1>
					<br></br> <br />
					<div class="ui-g" dir="rtl">
						<div class="ui-g-12 ui-md-2">
							<h:outputLabel value="المستودع" />
						</div>
						<div class="ui-g-12 ui-md-4">
							<p:selectOneMenu styleClass="form-control" id="stockNO"
								placeholder="إختر المستودع" value="#{exchangeRequestBean.strNo}"
								style="direction: rtl;height: 39px;">
								<!-- 								<f:selectItem itemLabel="إختر المستودع" itemValue="-1"></f:selectItem> -->
								<f:selectItems value="#{exchangeRequestBean.allWareHouses}"
									var="c" itemLabel="#{c.storeName}" itemValue="#{c.storeNumber}" />
								<p:ajax process="@this" update="articleTable"
									listener="#{exchangeRequestBean.loadAllStoreRequestModel}" />
							</p:selectOneMenu>
						</div>
						<div class="ui-g-1">
							<h:outputLabel value="حالة الرصيد" />
						</div>
						<div class="ui-g-2">
							<p:selectOneMenu value="#{exchangeRequestBean.status}"
								style="width: 75%">
								<f:selectItem itemLabel="الكل" itemValue="0" />
								<f:selectItem itemLabel="رصيد" itemValue="1" />
								<f:selectItem itemLabel="بدون رصيد" itemValue="2" />
								<p:ajax update="articleTable" process="@this"
									listener="#{exchangeRequestBean.loadAllStoreRequestModel}"></p:ajax>
							</p:selectOneMenu>
						</div>

					</div>

					<br></br>
					<p:dataTable var="articleItem" id="articleTable"
						value="#{exchangeRequestBean.articlesStockList}"
						emptyMessage="لايوجد بيانات" rowIndexVar="rowIndex"
						widgetVar="vtWidget" paginator="true" rows="12" editable="true"
						paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
						filteredValue="#{exchangeRequestBean.filteredExchangeRequestList}">


						<f:facet name="header">
							<p:outputPanel>
								<h:outputText value="ابحث فى كل الحقول:" />
								<p:inputText id="globalFilter" onkeyup="PF('vtWidget').filter()"
									style="width:150px" placeholder="كلمة البحث">
								</p:inputText>
							</p:outputPanel>
						</f:facet>



						<p:column headerText="رمز الصنف"
							filterBy="#{articleItem.articleCode}" filterMatchMode="contains"
							style="width:20%">
							<h:outputText value="#{articleItem.articleCode}" />

						</p:column>
						<p:column headerText="إسم الصنف"
							filterBy="#{articleItem.articleName}" filterMatchMode="contains"
							style="width:55%">
							<h:outputText value="#{articleItem.articleName}" />
						</p:column>
						<p:column headerText="المحجوز" style="width:10%">
							<h:outputText value="#{articleItem.qtyReserved}" />
						</p:column>
						<p:column headerText="المتوفر" style="width:10%">
							<h:outputText value="#{articleItem.qtyAvailable}" />
						</p:column>
						<p:column width="5%" style="text-align:center"
							headerText="#{msg['details']}">
							<p:commandButton
								action="#{exchangeRequestBean.loadSelectedArticle(articleItem)}"
								icon="ui-icon-search" oncomplete="PF('exchange_dlg').show()"
								update="includeform:exchange_dlgId">
							</p:commandButton>
						</p:column>
					</p:dataTable>


					<p:dialog widgetVar="exchange_dlg" id="exchange_dlgId" width="70%"
						hideEffect="fade" showEffect="explode" dir="rtl" modal="true"
						resizable="false">

						<div style="text-align: center; font-size: x-large;">
							<h:outputLabel value="حركة صنف"></h:outputLabel>
						</div>

						<br />
						<div class="ui-g">
							<div class="ui-g-1">
								<h:outputLabel value="رقم الصنف"></h:outputLabel>
							</div>
							<div class="ui-g-3">
								<h:outputLabel
									value="#{exchangeRequestBean.articleStore.articleCode}"></h:outputLabel>
							</div>

							<div class="ui-g-1">
								<h:outputLabel value="إسم الصنف" />
							</div>
							<div class="ui-g-3">
								<h:outputLabel
									value=" #{exchangeRequestBean.articleStore.articleName}"></h:outputLabel>
							</div>

							<div class="ui-g-1">
								<h:outputLabel value="الوحدة" />
							</div>


							<div class="ui-g-3">
								<h:outputLabel
									value=" #{exchangeRequestBean.articleStore.articleUnite}"></h:outputLabel>
							</div>

						</div>
						<br />
						<div class="bodyt" style="height: 200px; overflow: auto">
							<table id="tabStore" class="table table-striped table-hover">
								<thead>
									<tr>
										<th style="width: 20%; text-align: center">اسم العملية</th>
										<th style="width: 20%; text-align: center">رقم المستند</th>
										<th style="width: 20%; text-align: center">تاريخ العملية</th>
										<th style="width: 20%; text-align: center">المستند</th>
										<th style="width: 20%; text-align: center">الكمية الخارجة</th>


									</tr>
								</thead>
								<tbody>
									<ui:repeat var="det" varStatus="x"
										value="#{exchangeRequestBean.articleStore.historyList}">
										<tr>
											<td style="text-align: center">#{det.transactionName}</td>
											<td style="text-align: center">#{det.serialNumber}</td>
											<td style="text-align: center">#{det.transactionDate}</td>
											<td style="text-align: center">#{det.specialNumber}</td>
											<td style="text-align: center">#{det.qtyOutput}</td>

										</tr>

									</ui:repeat>
								</tbody>
							</table>
						</div>



						<br />
						<div class="image-box-footer" align="left">
							<!-- 							<p:commandButton value="بطاقة عهدة" ajax="false" -->
							<!-- 								onclick="this.form.target='_blank'" styleClass="purple-btn" -->
							<!-- 								icon="ui-icon ui-icon-print" -->
							<!-- 								action="#{exchangeRequestBean.printProtectionCardReportAction}" /> -->
							<!-- 							onclick="this.form.target='_blank'" -->
							<!-- 							<p:spacer height="10px"></p:spacer> -->
							<p:commandButton value="بطاقة صنف" ajax="false"
								onclick="this.form.target='_blank'" styleClass="purple-btn"
								icon="ui-icon ui-icon-print"
								action="#{exchangeRequestBean.printArticalCardReportAction}" />
							<!-- onclick="this.form.target='_blank'" -->
							<p:spacer height="10px"></p:spacer>
							<p:commandButton value="رجوع" immediate="true"
								onclick="PF('exchange_dlg').hide()" />

						</div>
					</p:dialog>

				</div>
			</h:form>
		</ui:define>
	</ui:composition>

</f:view>
</html>
