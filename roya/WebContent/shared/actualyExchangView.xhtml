<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">


<h:head>


	<link rel="stylesheet" type="text/css"
		href="#{facesContext.externalContext.requestContextPath}/resources/jqueryCalendarsIslam/jquery.calendars.picker.css">
	</link>
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/resources/jqueryCalendarsIslam/jquery.calendars.min.js"></script>
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/resources/jqueryCalendarsIslam/jquery.plugin.js"></script>
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/resources/jqueryCalendarsIslam/jquery.calendars.picker.js"></script>
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/resources/jqueryCalendarsIslam/jquery.calendars.plus.js"></script>

	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/resources/jqueryCalendarsIslam/convertHG.js"></script>
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/resources/jqueryCalendarsIslam/jquery.calendars.ummalqura.js"></script>
	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/resources/jqueryCalendarsIslam/jquery.calendars.ummalqura-ar.js"></script>

</h:head>
<h:body>
	<div class="container col-md-12 "
		style="background-color: white; border-top: 5px solid #428BCA;">



		<br></br>
		<div>
			<h3 class="page-header"
				style="margin: 0px 0 20px ! important; color: #428bca">اذن صرف
				فعلى</h3>
		</div>




		<h:form id="includeform">

			<div class="row">
				<div class="col-md-6">
					<div class="row ">
						<div class="col-md-3">
							<h:outputLabel styleClass="btxt" value=" السنة المالية" />
						</div>
						<div class="col-md-7">
							<h:outputLabel
								value="#{actualyExchangeBean.actualDisbursementrequest.year.yearName}" />


						</div>

					</div>
					<br></br>
					<div class="row">
						<div class="col-md-3">
							<h:outputLabel styleClass="btxt" value="الرقم الخاص" />
						</div>
						<div class="col-md-7">
							<h:outputLabel
								value="#{actualyExchangeBean.actualDisbursementrequest.specialNumber}" />

						</div>
					</div>
					<br></br>
					<div class="row">
						<div class="col-md-3">
							<h:outputLabel styleClass="btxt" value=" التاريخ" />

						</div>
						<div class="col-md-7">
							<h:outputLabel id="newwrkhighcopy"
								value="#{actualyExchangeBean.actualDisbursementrequest.date}" />

						</div>

					</div>
					<br></br>
				</div>

				<div class="col-md-6">
					<div class="row ">
						<div class="col-md-3">
							<h:outputLabel styleClass="btxt" value="  الجهة الطالبة" />
						</div>
						<div class="col-md-7">
							<h:outputLabel
								value="#{actualyExchangeBean.actualDisbursementrequest.deptName}"
								required="true" />


						</div>

					</div>
					<br></br>
					<div class="row">
						<div class="col-md-3">
							<h:outputLabel styleClass="btxt" value="المستودع" />
						</div>
						<div class="col-md-7">
							<h:outputLabel
								value="#{actualyExchangeBean.actualDisbursementrequest.storeName}" />

						</div>
					</div>
					<br></br>
					<div class="row">
						<div class="col-md-3">
							<h:outputLabel styleClass="btxt" value="المستلم" />

						</div>
						<div class="col-md-7">
							<h:outputLabel
								value="#{actualyExchangeBean.actualDisbursementrequest.userName}" />
						</div>

					</div>
					<br></br>
				</div>


			</div>

			<hr></hr>



			<div class="row">

				<div class="col-md-12 ">

					<div class="table-responsive">





						<table class="table table-striped table-hover">
							<thead>
								<tr>

									<th>رقم</th>
									<th class="col-md-2">الصنف</th>
									<th>العدد</th>
									<th>الوحدة</th>
									<th>سعر الوحدة</th>
									<th>مجموع القيم</th>
									<th>حالة الصنف</th>
									<th class="col-md-1">ملاحظات</th>
									<!-- 											<th class="col-md-2">الباركود</th> -->
									<!-- 											<th >حذف</th> -->
								</tr>
							</thead>
							<tbody>

								<ui:repeat var="det" varStatus="x"
									value="#{actualyExchangeBean.actualDisbursementrequest.actualDisbursementDetails}">


									<tr style="color: #428BCA">

										<td>#{x.index+1}</td>
										<td>#{det.tenderItem.name}</td>
										<td><h:inputText style="width:80px" id="count" disabled="#{actualyExchangeBean.secodFlagForAccept}"												styleClass=" form-control" value="#{det.quantity}">
												<p:ajax listener="#{actualyExchangeBean.updatePrice(det)}"
													update="totalPrice" event="blur" process="count"></p:ajax>
											</h:inputText></td>
										<td>#{det.tenderItem.unite.name}</td>
										<td><h:inputText disabled="#{actualyExchangeBean.secodFlagForAccept}"  id="unitePrice" style="width:80px"
												styleClass="form-control" value="#{det.unitPrice}">

												<p:ajax listener="#{actualyExchangeBean.updatePrice(det)}"
													update="totalPrice" event="blur" process="unitePrice"></p:ajax>
											</h:inputText></td>

										<td><h:outputLabel style="color:#428BCA" id="totalPrice"
												disabled="true" value="#{det.totalPrice}" /> ريال سعودى</td>


										<td><h:selectOneMenu disabled="true" styleClass="form-control"
												value="#{det.status}" style="width:80px;    height: 36px">
												<f:selectItem itemValue="1" itemLabel="جديد" />
												<f:selectItem itemValue="2" itemLabel="مستعمل" />
												<f:selectItem itemValue="3" itemLabel="اصلاح" />
												<f:selectItem itemValue="4" itemLabel="بيع" />
												<f:selectItem itemValue="5" itemLabel="منح" />
												<f:selectItem itemValue="6" itemLabel="تالف" />
												<f:selectItem itemValue="7" itemLabel="بدون" />
											</h:selectOneMenu></td>
										<td><h:outputText 
												value="#{det.details}"  /></td>

										<!-- 												<td><h:commandButton styleClass=" btn-primary" -->
										<!-- 														value="طباعة "></h:commandButton></td> -->
										<!-- 																<td><p:commandButton id="xx" -->
										<!-- 														style="width: 13px; height: 24px;" icon="fa fa-times" -->
										<!-- 														styleClass=" btn btn-danger"> -->

										<!-- 														<f:ajax -->
										<!-- 															listener="#{actualyExchangeBean.removeRecord(det)}" -->
										<!-- 															render="@form"></f:ajax> -->
										<!-- 													</p:commandButton></td> -->


									</tr>

								</ui:repeat>

							</tbody>
						</table>

					</div>


				</div>


			</div>
			<hr></hr>
			<div>
				<!-- Small modal -->
				<h:panelGroup rendered="#{ !actualyExchangeBean.secodFlagForAccept}">
					<button type="button" class="btn btn-primary "
						style="float: left; margin-bottom: 19px" data-toggle="modal"
						data-target="#gridSystemModal">موافق</button>
				</h:panelGroup>



				<div id="gridSystemModal" class="modal fade" tabindex="-1"
					role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal"
									aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
								<h4 class="modal-title" id="gridModalLabel">اضافة شرح و
									تاكيد</h4>
							</div>
							<div class="modal-body">
								<div class="container-fluid bd-example-row">
									<br></br>

									<div class="row">
										<div class="col-md-3">
											<h:outputLabel styleClass="btxt" value="توجيه المعاملة" />
										</div>
										<div class="col-md-7">

											<h:selectOneMenu id="typ" styleClass="form-control"
												value="#{actualyExchangeBean.applicationPurpose}" var="d"
												style=" margin-left: 1px;">

												<f:selectItems var="pp" itemLabel="#{pp.purposeName}"
													itemValue="#{pp.idStr} "
													value="#{actualyExchangeBean.wrkPurposes}" />
											</h:selectOneMenu>


										</div>

									</div>
									<br></br>
									<div class="row ">
										<div class="col-md-3">
											<h:outputLabel styleClass="btxt" value=" الشرح  " />
										</div>


										<div class="col-md-7">
											<h:inputTextarea value="#{actualyExchangeBean.wrkAppComment}"
												styleClass="form-control">
											</h:inputTextarea>
										</div>

									</div>

									<br></br>


								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-green"
										data-dismiss="modal">رجوع</button>
									<h:commandButton style="float:left" value="تاكيد"
										rendered="#{ !actualyExchangeBean.secodFlagForAccept}"
										styleClass="btn btn-primary"
										action="#{actualyExchangeBean.accept}">
										<f:ajax execute="@form"></f:ajax>
									</h:commandButton>
								</div>
							</div>
						</div>
					</div>
				</div>


				<br></br>



			</div>
		</h:form>

	</div>





</h:body>
</html>
