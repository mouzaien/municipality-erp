<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">



<h:head>

</h:head>
<h:body>

	<ui:composition template="/template.xhtml">

		<ui:define name="content">
			<h:form id="form">
				<p:messages autoUpdate="true" closable="true"></p:messages>
				<br />
				<div class="image-box-footer">

					<p:commandButton id="cBadd" value=" اضافة مستودع" icon="fa fa-plus"
						oncomplete="PF('whsdlAdd').show()"
						action="#{whsWarehouseBean.showdlAdd}" process="@this"
						update="form:panelGroupAdd">
					</p:commandButton>
				</div>
				<br />

				<h1 style="color: #7CB342; float: unset; text-align: center;">
					المستودعات <span class="ui-icon ui-icon-store"></span>
				</h1>

				<br />

				<p:dataTable id="whsDT" var="wareh" style="direction:rtl;"
					value="#{whsWarehouseBean.warehousesList}" widgetVar="cellemp"
					rows="10" paginator="true" paginatorPosition="bottom"
					emptyMessage="الجدول فارغ" rowIndexVar="index"
					
					selection="#{whsWarehouseBean.selectedWhsWarehouses}"
					rowKey="#{wareh.storeNumber}"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">


					<f:facet name="header">
						<p:outputPanel>
							<h:outputText value="ابحث فى كل الحقول:" />
							<p:inputText id="globalFilter" onkeyup="PF('cellemp').filter()"
								style="width:150px" placeholder="كلمة البحث">
							</p:inputText>
						</p:outputPanel>
					</f:facet>
					<p:column headerText="الرقم " width="5%" style="text-align: center">
						<h:outputText value="#{index+1}" />
					</p:column>
					<p:column headerText="الإسم" width="20%"
						filterBy="#{wareh.storeName}" filterMatchMode="contains">
						<h:outputText value="#{wareh.storeName}"></h:outputText>

					</p:column>

					<p:column headerText="مدير المستودع" width="20%">
						<p:selectOneMenu id="boss" value="#{wareh.storeBossId}"
							style="opacity: 1" disabled="true">
							<f:selectItems value="#{whsWarehouseBean.usersList}" var="user"
								itemLabel="#{user.firstName}" itemValue="#{user.userId}" />
						</p:selectOneMenu>

					</p:column>
					<p:column headerText="امين المستودع" width="20%">
						<p:selectOneMenu id="dean" value="#{wareh.storeDeanId}"
							style="opacity: 1" disabled="true">
							<f:selectItems value="#{whsWarehouseBean.usersList}" var="user"
								itemLabel="#{user.firstName}" itemValue="#{user.userId}" />
						</p:selectOneMenu>

					</p:column>
					<p:column headerText="النوع" width="10%" style="text-align: center">
						<h:outputText value="#{wareh.strType == 1 ? 'عادي':'رجيع'}"></h:outputText>

					</p:column>
					<p:column width="10%" headerText="تعديل" style="text-align: center">

						<p:commandButton id="cBedit" value="تعديل" icon="fa fa-edit"
							update="form:panelGroupEdit" 
							action="#{whsWarehouseBean.showdledit(wareh)}">
							<f:setPropertyActionListener value="#{wareh}"
								target="#{whsWarehouseBean.selectedWhsWarehouses}" />
						</p:commandButton>
					</p:column>
					<p:column width="10%" headerText="حذف" style="text-align: center">

						<p:commandButton id="cBdelete" value="حذف" icon="fa fa-delete"
							styleClass="red-btn" update="@form"  immediate="true"
							action="#{whsWarehouseBean.showdlDelete(wareh)}">
							<f:setPropertyActionListener value="#{wareh}"
								target="#{whsWarehouseBean.selectedWhsWarehouses}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
				<p:dialog position="center" widgetVar="whsdlEdit" responsive="true"
					width="70%" id="inputData2" closable="true" dir="rtl"
					resizable="true" modal="true">
					<h:panelGroup id="panelGroupEdit">
						<p:fieldset width="70%" legend=" مستودع ">
							<h:panelGrid columns="4" width="70%" cellpadding="10"
								cellspacing="15" style="margin-bottom:10px">
								<h:outputLabel value="اسم المستودع  " />
								<p:inputText id="nameedit" width="100%"
									value="#{whsWarehouseBean.stName}">
								</p:inputText>
								<h:outputLabel value="مدير المستودع " />
								<p:selectOneMenu id="bossEdit" required="true"
									value="#{whsWarehouseBean.stBossId}">
									<f:selectItems value="#{whsWarehouseBean.usersList}" var="user"
										itemLabel="#{user.firstName}" itemValue="#{user.userId}" />
								</p:selectOneMenu>
								<h:outputLabel value="امين المستودع " />
								<p:selectOneMenu id="deanEdit" required="true"
									value="#{whsWarehouseBean.stDeanId}">
									<f:selectItems value="#{whsWarehouseBean.usersList}" var="user"
										itemLabel="#{user.firstName}" itemValue="#{user.userId}" />
								</p:selectOneMenu>
								<h:outputLabel value="نوع المستودع " />
								<p:selectOneRadio id="consoleEdit" columns="1"
									value="#{whsWarehouseBean.stType}" unselectable="true">
									<f:selectItem itemLabel="رجيع" itemValue="2" />
									<f:selectItem itemLabel="عادي" itemValue="1" />
								</p:selectOneRadio>
								<!-- 							<h:outputLabel value="محظور ؟ " /> -->
								<!-- 							<p:selectBooleanCheckbox value="#{whsWarehouseBean.storeBlock}" /> -->

							</h:panelGrid>
							<div class="iamge-box-footer" align="left">
								<p:commandButton value="#{msg['save']}" icon="fa fa-save"
									action="#{whsWarehouseBean.savewhs}" update="whsDT">
								</p:commandButton>
								<p:spacer height="4"></p:spacer>
								<p:commandButton styleClass=" orange-btn" value="#{msg['back']}"
									icon="ui-icon ui-icon-keyboard-arrow-left" immediate="true"
									action="#{whsWarehouseBean.closedledit}" />
							</div>
						</p:fieldset>
					</h:panelGroup>
				</p:dialog>

				<p:dialog position="center" widgetVar="whsdlAdd" responsive="true"
					width="70%" closable="true" dir="rtl" resizable="true" modal="true">
					<h:panelGroup id="panelGroupAdd" width="70%">
						<p:fieldset legend=" مستودع " width="70%">
							<h:panelGrid columns="4" cellpadding="10" cellspacing="20"
								style="margin-bottom:10px">
								<h:outputLabel value="اسم المستودع  " />
								<p:inputText id="name" width="100%" 
									value="#{whsWarehouseBean.addEditWhsWarehouses.storeName}">
								</p:inputText>
								<!-- 							 -->
								<h:outputLabel value="مدير المستودع " />
								<p:selectOneMenu id="boss" required="true"
									value="#{whsWarehouseBean.addEditWhsWarehouses.storeBossId}">
									<f:selectItems value="#{whsWarehouseBean.usersList}" var="user"
										itemLabel="#{user.firstName}" itemValue="#{user.userId}" />
								</p:selectOneMenu>
								<h:outputLabel value="امين المستودع " />
								<p:selectOneMenu id="dean" required="true"
									value="#{whsWarehouseBean.addEditWhsWarehouses.storeDeanId}">
									<f:selectItems value="#{whsWarehouseBean.usersList}" var="user"
										itemLabel="#{user.firstName}" itemValue="#{user.userId}" />
								</p:selectOneMenu>
								<h:outputLabel value="نوع المستودع " />
								<p:selectOneRadio id="console" columns="1" 
									value="#{whsWarehouseBean.addEditWhsWarehouses.strType}"
									>
									<f:selectItem itemLabel="رجيع" itemValue="1" />
									<f:selectItem itemLabel="عادي" itemValue="2" />
								</p:selectOneRadio>
								<!-- 							<h:outputLabel value="محظور ؟ " /> -->
								<!-- 							<p:selectBooleanCheckbox value="#{whsWarehouseBean.storeBlock}" /> -->

							</h:panelGrid>
							<div class="iamge-box-footer" align="left">
								<p:commandButton value="#{msg['save']}" icon="fa fa-save"
									action="#{whsWarehouseBean.savewhs}" update="whsDT">
								</p:commandButton>
								<p:spacer height="4"></p:spacer>
								<p:commandButton styleClass=" orange-btn" value="#{msg['back']}"
									icon="ui-icon ui-icon-keyboard-arrow-left" immediate="true"
									onclick="PF('whsdlAdd').hide();" />
							</div>
						</p:fieldset>
					</h:panelGroup>
				</p:dialog>
				<p:dialog header="حذف المستودع" widgetVar="confirmDialog"
					responsive="true" id="inputData3" modal="true" width="50%"
					closable="true" dir="rtl">
					<h:panelGroup id="confirmDialog">
						<div class="ui-g-12">
							<h:outputLabel value="هل   أنت متأكد من حذف المستودع؟"
								styleClass="btxt" />
						</div>
					</h:panelGroup>
					<br />
					<div align="center">
						<p:commandButton value="نعم" styleClass="btn btn-primary"
							action="#{whsWarehouseBean.deletewhs}" update="whsDT"
							onsuccess="PF('confirmDialog').hide();" process="@this">
						</p:commandButton>

						<p:commandButton value="تراجع" styleClass=" orange-btn"
							immediate="true" onclick="PF('confirmDialog').hide();" />

					</div>
				</p:dialog>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>

</html>
