<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<f:view>

	<h:head>


		<link rel="apple-touch-icon" href="apple-touch-icon.png"></link>

		<script
			src="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/js/vendor/modernizr-2.8.3.min.js"></script>
		<link rel="stylesheet"
			href="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/css/bootstrap/bootstrap.min.css"></link>
		<link rel="stylesheet"
			href="#{facesContext.externalContext.requestContextPath}/resources/css/PFDataTableCustomize.css"></link>

	</h:head>
	<ui:composition template="/pages/menuBar.xhtml">

		<ui:define name="content">
			<h:form id="includeform">
				<p:messages autoUpdate="true" closable="true"></p:messages>
				<div class="container col-md-12 "
					style="background-color: white; border-top: 5px solid #428BCA;">



					<br />
					<div>
						<h3 class="page-header"
							style="margin: 0px 0 20px ! important; color: #428bca">الإستلام
							الفعلي-مذكرة إستلام</h3>
					</div>
					<div class="row">
						<h4 class="page-header"
							style="margin: 0px 58px 20px ! important; color: #FF5722">بيانات
							مذكرة الإستلام</h4>

						<div class="col-md-4">
							<div class="row ">
								<div class="col-md-4">
									<label class="btxt">السنة المالية</label>

								</div>
								<div class="col-md-8">
									<h:selectOneMenu value="#{stockEntryBean.currentFinYear}"
										styleClass="form-control" style="direction: rtl;height: 39px;">
										<f:selectItems value="#{stockEntryBean.allfinYears}" var="c"
											itemLabel="#{c.yearName}" itemValue="#{c.YEARID}" />
									</h:selectOneMenu>
								</div>

							</div>
						</div>

						<div class="col-md-4">
							<div class="row ">
								<div class="col-md-4">
									<label class="btxt">تاريخ المذكرة</label>

								</div>
								<div class="col-md-8">
									<ui:include src="../shared/calender.xhtml" />

								</div>

							</div>
						</div>
						<div class="col-md-4">
							<div class="row ">
								<div class="col-md-4">
									<label class="btxt">المستودع</label>

								</div>
								<div class="col-md-8">

									<h:selectOneMenu styleClass="form-control" id="stockNO"
										value="#{stockEntryBean.selectedWareHouse}"
										style="direction: rtl;height: 39px;">
										<f:selectItems value="#{stockEntryBean.allWareHouses}" var="c"
											itemLabel="#{c.storeName}" itemValue="#{c.storeNumber}" />
										<f:ajax event="change" execute="@this" listener="#{stockEntryBean.updateNameAfterChoiseArticle}" render="articles"></f:ajax>
									</h:selectOneMenu>
								</div>

							</div>
						</div>


					</div>

					<br />
					<div class="row">

						<div class="col-md-4">
							<div class="row ">
								<div class="col-md-4">
									<label class="btxt">الرقم الخاص</label>

								</div>
								<div class="col-md-8">

									<h:inputText id="finEntryNo" styleClass="form-control"
										required="true"
										requiredMessage="من فضلك ادخل  الرقم الخاص بالمذكرة "
										value="#{stockEntryBean.stockEntryMaster.stockFinEntryNo}" />

								</div>

							</div>
						</div>

						<div class="col-md-4">
							<div class="row ">
								<div class="col-md-4">
									<label class="btxt">رقم الإشعار</label>

								</div>
								<div class="col-md-8">
									<h:inputText id="noticeNo" styleClass="form-control"
										value="#{stockEntryBean.stockEntryMaster.stockNoticeNo}" />
								</div>

							</div>
						</div>
						<div class="col-md-4">
							<div class="row ">
								<div class="col-md-4">
									<label class="btxt">تاريخ الإشعار</label>

								</div>
								<div class="col-md-8">

									<!-- 		<ui:include src="../shared/calender.xhtml" /> -->
									<!-- 		<h:inputText id="noticeDate" styleClass="form-control" value="#{stockEntryBean.stockEntryMaster.stockNoticeDate}" /> -->
									<ui:include src="../shared/NotifDate.xhtml" />
								</div>

							</div>
						</div>


					</div>
					<br />
					<div class="row">

						<div class="col-md-4">
							<div class="row ">
								<div class="col-md-4">
									<label class="btxt">رقم أمر الشراء</label>

								</div>
								<div class="col-md-8">

									<h:inputText id="buyno" styleClass="form-control"
										value="#{stockEntryBean.stockEntryMaster.stockBuyNo}" />

								</div>

							</div>
						</div>

						<div class="col-md-4">
							<div class="row ">
								<div class="col-md-4">
									<label class="btxt">تاريخ أمر الشراء</label>

								</div>
								<div class="col-md-8">
									<ui:include src="../shared/buyDate.xhtml" />

									<!-- 									<h:inputText id="buyDate" styleClass="form-control" value="#{stockEntryBean.stockEntryMaster.stockBuyDate}" /> -->

								</div>

							</div>
						</div>
						<div class="col-md-4"></div>
					</div>
					<br />
					<div class="row">


						<div class="col-md-8">
							<div class="row ">
								<div class="col-md-2">
									<h:outputLabel styleClass="btxt" value="المورد/الجهة" />
								</div>
								<div class="col-md-10">
									<h:panelGroup>
										<div class="row">
											<div class="col-sm-7">
												<div id="bts-ex-5" class="selectpicker " style="width: 100%"
													data-live="true">
													<button data-id="prov" type="button"
														class="btn  btn-block btn-default dropdown-toggle">
														<span class="placeholder" style="float: right;">
															اختر المورد</span> <span class="caret" style="float: left;"></span>
													</button>
													<div class="dropdown-menu" style="position: absolute;">
														<div class="live-filtering" data-clear="true"
															data-autocomplete="true" data-keys="true">
															<label class="sr-only" for="input-bts-ex-4">...ابحث...</label>
															<div class="search-box col-md-12 ">

																<div class="input-group" style="margin-top: 5px">
																	<span class="input-group-addon" id="search-icon3">
																		<span class="fa fa-search"></span> <a href="#"
																		class="fa fa-times hide filter-clear"><span
																			class="sr-only">Clear filter</span></a>
																	</span>
																	<div style="height: 35.5px !important;">
																		<input type="text" placeholder="ابحث ..."
																			id="input-bts-ex-4" class="form-control live-search"
																			aria-describedby="search-icon3" tabindex="1" />
																	</div>
																</div>
															</div>
															<div class="list-to-filter  col-md-11 form-control"
																style="margin-top: 13px; overflow-y: scroll; height: 200px;">

																<ul class="list-unstyled" id="big">
																	<li class="filter-item items" data-filter="" value=" "
																		style="color: #428bca">المورد</li>
																	<ui:repeat var="y" value="#{testBean4.supplierList}">
																		<li class="filter-item items" id="#{y.id}"
																			data-filter="#{y.name}" value="#{y.id}">#{y.name}</li>
																	</ui:repeat>
																</ul>
																<div class="no-search-results">
																	<div class="alert alert-warning" role="alert">
																		<i class="fa fa-warning margin-right-sm"></i>لا يوجد
																		اختيار لمدخلكم <strong>'<span></span>'
																		</strong>
																	</div>
																</div>
															</div>
														</div>
													</div>
													<input type="text" style="display: none" name="supplier"
														id="xxxx" />

												</div>
											</div>
										</div>

									</h:panelGroup>
								</div>


							</div>
						</div>
						<div class="col-md-4">
							<div class="row "></div>
						</div>


					</div>


					<br /> <br />
					<h4 class="page-header"
						style="margin: 0px 58px 20px ! important; color: #FF5722">أصناف
						الإستلام</h4>
					<div class="col-md-10"></div>

					<div class="row">
						<div class="col-md-12">


							<div class="row">

								<div class="col-md-6">
									<div class="row ">
										<div class="col-md-2">
											<label class="btxt">الصنف</label>

										</div>
										<div class="col-md-8">
											<h:panelGroup id="articles">

													<h:selectOneMenu styleClass="form-control" id="stockArticles"
													value="#{stockEntryBean.itemId}"
													style="direction: rtl;height: 39px;">
													<f:selectItems value="#{stockEntryBean.articles}"
														var="c" itemLabel="#{c.name}"
														itemValue="#{c.id}" />
													<f:ajax event="change" execute="@this"></f:ajax>
												</h:selectOneMenu>




											</h:panelGroup>

										</div>

									</div>
								</div>

								<div class="col-md-4">
									<div class="row ">
										<div class="col-md-4">
											<label class="btxt">السعر (بالريال 00.00 )</label>

										</div>
										<div class="col-md-8">
											<h:inputText id="price" styleClass="form-control"
												required="true" requiredMessage="من فضلك ادخل  سعر الصنف "
												value="#{stockEntryBean.stockInDetails.price}" />
										</div>

									</div>
								</div>



							</div>

							<br></br>

							<div class="row">
								<div class="col-md-1">
									<h:outputLabel styleClass="btxt" value="الكمية"></h:outputLabel>
								</div>
								<div class="col-md-3">
									<h:inputText styleClass="form-control" id="count"
										value="#{stockEntryBean.stockInDetails.qty}" required="true"
										requiredMessage="من فضلك ادخل  الكمية "
										validatorMessage="من فضلك ادخل  ارقام فقط  فى خانة العدد ">

									</h:inputText>
								</div>

								<h:panelGroup id="unit">
									<div class="col-md-2">
										<h:outputLabel styleClass="btxt" style="font-size:large"
											value="#{stockEntryBean.article.itemUnite.name}"></h:outputLabel>
									</div>
								</h:panelGroup>
								<div class="col-md-4">
									<div class="row ">
										<div class="col-md-4">
											<label class="btxt">حالة الصنف</label>

										</div>
										<div class="col-md-8">

											<h:selectOneMenu styleClass="form-control"
												value="#{stockEntryBean.selectedStatus}" id="status"
												style="direction: rtl;height: 39px;">
												<f:selectItems value="#{stockEntryBean.allArticlesStatus}"
													var="c" itemLabel="#{c.articleStatusName}"
													itemValue="#{c.articleStatusId}" />
											</h:selectOneMenu>
										</div>

									</div>
								</div>
							</div>


							<br></br>

							<div class="row">
								<div class="col-md-2">
									<h:outputLabel styleClass="btxt" value="الملاحظات"></h:outputLabel>
								</div>
								<div class="col-md-8">
									<h:inputText id="desc" styleClass="form-control"
										value="#{stockEntryBean.stockInDetails.notes}"></h:inputText>
								</div>

								<div class="col-md-2">
									<h:commandButton id="addBtn" style="float:right"
										styleClass="btn btn-success"
										disabled="#{!stockEntryBean.allowAdd}" value="اضافة">
										<f:ajax listener="#{stockEntryBean.addInStockItem}"
											execute="stockArticles desc  count price status"
											render="table desc count price status addBtn"></f:ajax>
									</h:commandButton>
								</div>

							</div>


							<br></br>


						</div>


						<div class="row">
							<h:panelGroup id="table">
								<div class="col-md-12 ">

									<div class="table-responsive">





										<table class="table table-striped table-hover">
											<thead>
												<tr>

													<th>رقم</th>
													<th>اسم الصنف</th>
													<th>حالة الصنف</th>
													<th>العدد</th>
													<th>الوحدة</th>
													<th>سعر الوحدة</th>
													<th>القيمة الكلية</th>
													<th>المواصفات</th>
													<th>حذف</th>

												</tr>
											</thead>
											<tbody>
												<ui:repeat var="det" varStatus="x"
													value="#{stockEntryBean.stockInDetailList}">


													<tr>

														<td>#{x.index+1}</td>
														<td>#{det.articleName}</td>
														<td>#{det.articleStatusName}</td>
														<td>#{det.qty}</td>
														<td>#{det.uniteName}</td>
														<td>#{det.price}</td>
														<td>#{det.total}</td>
														<td>#{det.notes}</td>
														<td><p:commandButton id="xx"
																style="width: 13px; height: 24px;" icon="fa fa-times"
																styleClass=" btn btn-danger">
																<f:ajax listener="#{stockEntryBean.removeRecord(det)}"
																	render="@form"></f:ajax>
															</p:commandButton></td>


													</tr>

												</ui:repeat>
											</tbody>
										</table>
									</div>


								</div>
							</h:panelGroup>

						</div>


					</div>

					<br></br>





					<div class="col-md-12 ">
						<hr></hr>

						<h:commandButton value="حفظ"
							style=" margin-bottom: 19px;
						float:left"
							styleClass="btn btn-primary">
							<f:ajax listener="#{stockEntryBean.save}"
								execute="finEntryNo noticeNo noticeDate buyno buyDate stockNO"
								render="@form"></f:ajax>
						</h:commandButton>
						<br></br>
					</div>

				</div>
				<hr></hr>

				<script
					src="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/ js/vendor/jquery-2.1.4.min.js"></script>

				<script
					src="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/js/vendor/tabcomplete.min.js"></script>
				<script
					src="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/js/vendor/livefilter.min.js"></script>
				<script
					src="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/js/vendor/src/bootstrap-select.js"></script>
				<script
					src="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/js/vendor/filterlist.min.js"></script>
				<script
					src="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/js/plugins.js"></script>

				<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
				<script>
					(function(b, o, i, l, e, r) {
						b.GoogleAnalyticsObject = l;
						b[l] || (b[l] = function() {
							(b[l].q = b[l].q || []).push(arguments)
						});
						b[l].l = +new Date;
						e = o.createElement(i);
						r = o.getElementsByTagName(i)[0];
						e.src = '//www.google-analytics.com/analytics.js';
						r.parentNode.insertBefore(e, r)
					}(window, document, 'script', 'ga'));
					ga('create', 'UA-XXXXX-X', 'auto');
					ga('send', 'pageview');

					var ul = document.getElementById('big'); // Parent

					ul.addEventListener('click', function(e) {
						if (e.target.tagName === 'LI') {

							$("#xxxx").val(e.target.id);// Check if the element is a LI

							//alert($("#xxxx").val())
						}
					})

					var ul2 = document.getElementById('lstArticle'); // Parent

					ul2.addEventListener('click', function(e) {
						if (e.target.tagName === 'LI') {

							$("#selectedArticle").val(e.target.id);// Check if the element is a LI

							// alert($("#selectedArticle").val())
						}

						onSelect: document.getElementById(
								'includeform:updateOut').click();
					})
				</script>


			</h:form>

		</ui:define>
	</ui:composition>

</f:view>
</html>
