<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">


	<h:head>


		<link rel="apple-touch-icon" href="apple-touch-icon.png"></link>

		<script
			src="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/js/vendor/modernizr-2.8.3.min.js"></script>
		<script type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/datatableCss4/js/jquery.dataTables.min.js"></script>


		<link rel="stylesheet"
			href="#{facesContext.externalContext.requestContextPath}/dropDownMenuCss/css/bootstrap/bootstrap.min.css"></link>
		<link rel="stylesheet"
			href="#{facesContext.externalContext.requestContextPath}/resources/css/PFDataTableCustomize.css"></link>

	</h:head>
	<body>
	<ui:composition template="/template.xhtml">

		<ui:define name="content">
			<h:form id="includeform">
				<p:messages autoUpdate="true" closable="true"></p:messages>
				<div class="container col-md-12 "
					style="background-color: white; border-top: 5px solid #428BCA;">


					<br />
					<div>
						<h3 class="page-header"
							style="margin: 0px 0 20px ! important; color: #428bca">عرض
							المخالفات</h3>
					</div>
					<br />
					<div class="row">

						<div class="col-md-12">
							<div class="row ">

								<div class="col-md-12">
									<div class="row ">
										<div class="col-md-2">
											<h:outputLabel value="رقم الرخصة" styleClass="btxt" />
										</div>
										<div class="col-md-2">
											<h:outputLabel
												value="#{searchPenaltyBean.trdMasterFile.licNo}" />
										</div>
										<div class="col-md-2">
											<h:outputLabel value="#{msg['commercial.name']}"
												styleClass="btxt" />
										</div>
										<div class="col-md-6">
											<h:outputLabel
												value="#{searchPenaltyBean.trdMasterFile.trdName}" />
										</div>
									</div>
								</div>

							</div>

							<div class="row ">

								<div class="col-md-12">
									<div class="row ">
										<div class="col-md-2">
											<h:outputLabel value="صاحب المنشأة" styleClass="btxt" />
										</div>
										<div class="col-md-4">
											<h:outputLabel
												value="#{searchPenaltyBean.trdMasterFile.licOwnerName}" />
										</div>

									</div>

								</div>
							</div>

							<div class="row ">

								<div class="col-md-12">
									<div class="row ">
										<div class="col-md-2">
											<h:outputLabel value="عنوان المنشأة" styleClass="btxt" />
										</div>
										<div class="col-md-10">
											<h:outputLabel
												value="#{searchPenaltyBean.trdMasterFile.licAdress}" />
										</div>

									</div>
								</div>

							</div>

							<div class="row ">

								<div class="col-md-12">
									<div class="row ">
										<div class="col-md-2">
											<h:outputLabel value="تاريخ بداية الرخصة" styleClass="btxt" />
										</div>
										<div class="col-md-2">
											<h:outputLabel
												value="#{searchPenaltyBean.trdMasterFile.licBeginDate}" />
										</div>
										<div class="col-md-2">
											<h:outputLabel value="تاريخ نهاية الرخصة" styleClass="btxt" />
										</div>
										<div class="col-md-2">
											<h:outputLabel
												value="#{searchPenaltyBean.trdMasterFile.licEndDate}" />
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>
					<div class="col-md-12 ">
						<hr></hr>

						<h:commandButton value="عرض المخالفات" id="btnShow"
							style=" margin-bottom: 19px;float:left"
							styleClass="btn btn-primary"
							disabled="#{!searchPenaltyBean.isActive}">
							<f:ajax listener="#{searchPenaltyBean.getListFinesMaster}"
								render="table empLic"></f:ajax>
						</h:commandButton>
						<br></br>
					</div>

					<div class="row">
						<h4 class="page-header"
							style="margin: 0px 58px 20px ! important; color: #FF5722">عرض
							المخالفات</h4>
						<div class="col-md-4" style="padding-right: 37px;">
							<h:panelGroup id="selectLic">
								<h:selectOneMenu id="empLic" styleClass="form-control"
									disabled="#{!searchPenaltyBean.isSelected}"
									value="#{searchPenaltyBean.paid}">
									<f:selectItem itemLabel="غير مسددة" itemValue="1" />
									<f:selectItem itemLabel="مسددة" itemValue="2" />
									<f:selectItem itemLabel="كل الرخص" itemValue="3" />
									<!-- 										<f:selectItem itemValue="" itemLabel="#{msg['choose.employee']}" /> -->
									<!-- 										<f:selectItems -->
									<!-- 											value="#{mainManagedBean.mailExecutor.employersList}" -->
									<!-- 											var="emp" itemValue="#{emp.userId}" -->
									<!-- 											itemLabel="#{emp.employeeName}" /> -->
									<f:ajax render="table" execute="empLic" event="change"
										listener="#{searchPenaltyBean.getListFinesMaster}" />
								</h:selectOneMenu>
							</h:panelGroup>
						</div>
					</div>
					<br></br> <br></br>
					<div class="row" style="">

						<h:panelGroup id="table">

							<div class="col-md-12 ">

								<div class="table-responsive"
									style="position: relative; height: 300px; overflow-y: auto; width: 98%; padding-right: 27px;">

									<hr></hr>



									<table id="exemple" class="table table-striped table-hover">
										<thead>
											<tr>

												<th>رقم المخالفة</th>
												<th>تاريخ المخالفة</th>
												<th>رقم الاثبات</th>
												<th>صاحب المخالفة</th>
												<th>رقم الرخصة</th>
												<th>القيمة</th>
												<th>حالة الدفع</th>
												<th>الرقم المميز</th>
												<th>التفاصيل</th>

											</tr>
										</thead>
										<tbody>
											<ui:repeat var="det" varStatus="x"
												value="#{searchPenaltyBean.licTrdMasterFileList}">


												<tr>

													<td>#{det.fineNo}</td>
													<td>#{det.fineDate}</td>
													<td>#{det.fIdNo}</td>
													<td>#{det.fName}</td>
													<td>#{det.fLicenceNo}</td>
													<td>#{det.fLicenceNo}</td>
													<td>#{det.fFineCase}</td>
													<td>#{det.fKeycode}</td>
													<td>
														<!-- 													   <p:commandButton id="xx" --> <!-- 																style="width: 50px; height: 24px;" icon="ui-icon-search" -->
														<!-- 																styleClass=" btn btn-danger" data-toggle="modal" data-target="#gridSystemModal"> -->
														<!-- 																<f:ajax --> <!-- 																	listener="#{stockEntryBean.removeRecord(det)}" -->
														<!-- 																	render="@form"></f:ajax> --> <!-- 															</p:commandButton></td> -->
														<!-- 							<h:commandButton button type="button" class="btn btn-primary " -->
														<!-- 							style="float: left; margin-bottom: 19px; margin-left: 3px" -->
														<!-- 							data-toggle="modal" data-target="#gridSystemModal">مصادقة</h:commandButton> -->


														<h:commandLink value="التفاصيل"
															onclick="$('#gridSystemModal').modal('show');"
															action="#{searchPenaltyBean.DetailLic}"
															styleClass="btn btn-primary">
															<f:setPropertyActionListener value="#{det}"
																target="#{searchPenaltyBean.reqfinesMaster}" />

															<f:ajax execute="@this"
																render="includeform:PcommercialName includeform:PCode
																		  includeform:POwnerName includeform:POwnerNo 
																		  includeform:PLicNO includeform:PAdress
																		  includeform:PLicEndDate includeform:PMapNo 
																		  includeform:PBlockNO includeform:PLicStartDate
																		  includeform:PFineNO includeform:PReportNo includeform:fFineCase includeform:PfineDate
																		  includeform:PdeptNO includeform:PdeptDesc includeform:PfSupCode
																		  includeform:PfSupName includeform:PFineDesc includeform:PActType includeform:PReopenDate
																		  includeform:tableDetails" />
														</h:commandLink> <!-- <h:commandLink value="Show Modal" action="#{searchPenaltyBean.DetailLic}" -->
														<!--     onclick="$('#myModal').modal('show');" immediate="true"> -->
														<!--     <f:ajax execute="@this" render=":myForm"/> --> <!-- </h:commandLink> -->



													</td>
												</tr>

											</ui:repeat>
										</tbody>
									</table>
								</div>


							</div>
						</h:panelGroup>

					</div>



				</div>
				<hr></hr>
				<div id="gridSystemModal" class="modal fade" tabindex="-1"
					role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true">
					<div class="modal-dialog modal-lg" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal"
									aria-label="Close">
									<span aria-hidden="true"></span>
								</button>
								<h4 class="modal-title" id="gridModalLabel">التفاصيل</h4>
							</div>
							<div class="modal-body" style="padding: 28px;">
								<div class="container-fluid bd-example-row">
									<br></br>

									<div class="row">
										<h4 class="page-header"
											style="margin: 0px 58px 20px ! important; color: #FF5722">بيانات
											الرخصة</h4>

										<div class="col-md-12">
											<div class="row ">

												<div class="col-md-12">
													<div class="row ">
														<div class="col-md-2">
															<label class="btxt">الإسم التجاري</label>

														</div>
														<div class="col-md-4">
															<h:inputText id="PcommercialName"
																styleClass="form-control" disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fTradeMarkName}" />
														</div>
														<div class="col-md-2">
															<label class="btxt">اارقم المميز</label>

														</div>
														<div class="col-md-4">
															<h:inputText id="PCode" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fKeycode}" />
														</div>


													</div>
												</div>

											</div>
											<br />

											<div class="row ">

												<div class="col-md-12">
													<div class="row ">


														<div class="col-md-1">
															<label class="btxt">صاحب المنشأة</label>

														</div>
														<div class="col-md-2">
															<h:inputText id="POwnerNo" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fIdNo}" />
														</div>
														<div class="col-md-5">
															<h:inputText id="POwnerName" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fName}" />
														</div>

														<div class="col-md-1">
															<label class="btxt">رقم الرخصة</label>

														</div>
														<div class="col-md-3">
															<h:inputText id="PLicNO" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fLicenceNo}" />
														</div>

													</div>
												</div>

											</div>
											<br />
											<div class="row ">

												<div class="col-md-12">
													<div class="row ">


														<div class="col-md-1">
															<label class="btxt">عنوان المنشأة</label>

														</div>
														<div class="col-md-6">
															<h:inputText id="PAdress" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fAddress}" />
														</div>


														<div class="col-md-2">
															<label class="btxt">تاريخ نهاية الرخصة</label>

														</div>
														<div class="col-md-3">
															<h:inputText id="PLicEndDate" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fLicEndDate}" />
														</div>

													</div>
												</div>

											</div>
											<br />
											<div class="row ">

												<div class="col-md-12">
													<div class="row ">


														<div class="col-md-1">
															<label class="btxt">رقم المخطط</label>

														</div>
														<div class="col-md-2">
															<h:inputText id="PMapNo" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fMapNo}" />
														</div>


														<div class="col-md-1">
															<label class="btxt">رقم القطعة</label>

														</div>
														<div class="col-md-3">
															<h:inputText id="PBlockNO" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fBlockNo}" />
														</div>
														<div class="col-md-2">
															<label class="btxt">تاريخ بداية الرخصة</label>

														</div>
														<div class="col-md-3">
															<h:inputText id="PLicStartDate" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fLicStartDate}" />
														</div>
													</div>
												</div>

											</div>
										</div>

										<br />
									</div>

									<br /> <br />
									<div class="row">
										<h4 class="page-header"
											style="margin: 0px 58px 20px ! important; color: #FF5722">بيانات
											المخالفة</h4>

										<div class="col-md-12">
											<div class="row ">

												<div class="col-md-12">
													<div class="row ">
														<div class="col-md-2">
															<label class="btxt">رقم المخالفة</label>

														</div>
														<div class="col-md-3">
															<h:inputText id="PFineNO" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fineNo}" />
														</div>
														<div class="col-md-2">
															<label class="btxt">رقم المحضر</label>

														</div>
														<div class="col-md-3">
															<h:inputText id="PReportNo" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fReportNo}" />
														</div>


													</div>
												</div>

											</div>
											<br />

											<div class="row ">

												<div class="col-md-12">
													<div class="row ">


														<div class="col-md-2">
															<label class="btxt">حالة المخالفة</label>

														</div>
														<div class="col-md-3">
															<h:inputText id="PfineStatus" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fFineCase}" />
														</div>


														<div class="col-md-2">
															<label class="btxt">تاريخ المحضر</label>

														</div>
														<div class="col-md-3">
															<h:inputText id="PfineDate" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fineDate}" />
														</div>

													</div>
												</div>

											</div>
											<br />
											<div class="row ">

												<div class="col-md-12">
													<div class="row ">


														<div class="col-md-1">
															<label class="btxt">الإدارة المختصة</label>

														</div>
														<div class="col-md-1">
															<h:inputText id="PdeptNO" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fDeptNo}" />
														</div>
														<div class="col-md-3">
															<h:inputText id="PdeptDesc" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fDeptNo}" />
														</div>

														<div class="col-md-2">
															<label class="btxt">رقم المراقب</label>

														</div>
														<div class="col-md-2">
															<h:inputText id="PfSupCode" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fSupervisorCode}" />
														</div>
														<div class="col-md-3">
															<h:inputText id="PfSupName" styleClass="form-control"
																disabled="true"
																value="#{searchPenaltyBean.reqfinesMaster.fSupervisorCode}" />
														</div>
													</div>


												</div>
											</div>

										</div>
										<br />
										<div class="row ">

											<div class="col-md-12">
												<div class="row ">


													<div class="col-md-1">
														<label class="btxt">شرح المخالفة</label>

													</div>
													<div class="col-md-8">
														<h:inputText id="PFineDesc" styleClass="form-control"
															disabled="true"
															value="#{searchPenaltyBean.reqfinesMaster.fFineDesc}" />
													</div>



												</div>
											</div>

										</div>
										<br />
										<div class="row ">

											<div class="col-md-12">
												<div class="row ">


													<div class="col-md-1">
														<label class="btxt">نوع النشاط</label>

													</div>
													<div class="col-md-2">
														<h:inputText id="PActType" styleClass="form-control"
															disabled="true"
															value="#{searchPenaltyBean.reqfinesMaster.activityType}" />
													</div>


													<div class="col-md-1">
														<label class="btxt">رقم التبليغ</label>

													</div>
													<div class="col-md-2">
														<h:inputText id="PLetterNo" styleClass="form-control"
															disabled="true"
															value="#{searchPenaltyBean.reqfinesMaster.fLetterNo}" />
													</div>
													<div class="col-md-1">
														<label class="btxt">تاريخ الإغلاق</label>

													</div>
													<div class="col-md-2">
														<h:inputText id="PcloseDate" styleClass="form-control"
															disabled="true"
															value="#{searchPenaltyBean.reqfinesMaster.fCloseDate}" />
													</div>
													<div class="col-md-1">
														<label class="btxt">تاريخ الفسخ</label>

													</div>
													<div class="col-md-2">
														<h:inputText id="PReopenDate" styleClass="form-control"
															disabled="true"
															value="#{searchPenaltyBean.reqfinesMaster.fReopenDate}" />
													</div>
												</div>
											</div>

										</div>
									</div>

									<br />
								</div>
								<br></br>

								<div class="row">
									<h4 class="page-header"
										style="margin: 0px 58px 20px ! important; color: #FF5722">تفاصيل
										المخالفة</h4>

									<div class="col-md-12">
										<div class="row ">

											<h:panelGroup id="tableDetails">

												<div class="col-md-12 ">

													<div class="table-responsive"
														style="position: relative; height: 300px; overflow-y: auto; width: 98%; padding-right: 27px;">

														<hr></hr>



														<table class="table table-striped table-hover">
															<thead>
																<tr>

																	<th>بيان الغرامة</th>
																	<th>الحد الادنى</th>
																	<th>الحد الأعلى</th>
																	<th>عدد المخالفات</th>
																	<th>قيمةالغرامة</th>
																	<th>إجمالي الغرامة</th>


																</tr>
															</thead>
															<tbody>
																<ui:repeat var="fdet" varStatus="x"
																	value="#{searchPenaltyBean.lstReqFinesDetails}">


																	<tr>

																		<td>#{fdet.reqFinesSetup.fineDesc}</td>
																		<td>#{fdet.reqFinesSetup.fineMinimumValue}</td>
																		<td>#{fdet.reqFinesSetup.fineSupermumValue}</td>
																		<td>#{fdet.reqFinesSetup.fineSupermumValue}</td>
																		<td>#{fdet.reqFinesSetup.fineSupermumValue}</td>
																		<td>#{fdet.reqFinesSetup.fineSupermumValue}</td>

																	</tr>

																</ui:repeat>
															</tbody>
														</table>
													</div>


												</div>
											</h:panelGroup>

										</div>
										<br />

									</div>

									<br />
								</div>



							</div>
							<div class="modal-footer">

								<button type="button" class="btn btn-success"
									data-dismiss="modal">إغلاق</button>

							</div>

						</div>
					</div>
				</div>
			</h:form>

		</ui:define>
	</ui:composition>
</body>

</html>
