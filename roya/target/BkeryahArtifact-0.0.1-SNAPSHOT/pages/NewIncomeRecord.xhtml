<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <link href="../resources/css/style.css" rel="stylesheet" type="text/css"></link>      
        <h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
        <script >
            $ = jQuery;
        </script>
        <link  rel="stylesheet"  type="text/css" href="#{facesContext.externalContext.requestContextPath}/resources/css/bootstrap-arabic.css" />
        <link  rel="stylesheet"  type="text/css" href="#{facesContext.externalContext.requestContextPath}/resources/css/style.css" />

        <script src="#{facesContext.externalContext.requestContextPath}/resources/js/bootstrap-arabic.js" />
    </h:head>
    <body>

        <ui:composition template="./WebTemplate.xhtml">

            <ui:define name="top">
                إضافة  وارد عام جديد
            </ui:define>

            <ui:define name="content">
                <h:form id="NewRecordForm" style="direction: rtl;">

                    
                        <p:outputPanel id="formPanel" >
                            <div class="container-fluid" >
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="موضوع المعاملة " style="font-size: 14px !important;" />
                                                </div>
                                                <div class="col-md-9">
                                                    <p:inputText value="#{newincomebean.newIncomeTitle}" id="newRectitle" style=" width:  100%" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="نوع المعاملة " style="font-size: 14px !important;" />
                                                </div>
                                                <div class="col-md-9">
                                                    <p:selectOneMenu  
                                                        value="#{newincomebean.newIncomeApplicationType}"
                                                        id="newRecordtyp" required="true" requiredMessage="نوع المعاملة مطلوب "
                                                        panelStyle="width:300px"
                                                        effect="fade" var="d"  
                                                        style="direction: rtl; margin-left: 1px; width: 100%;"  
                                                        filter="true" filterMatchMode="contains">
                                                        <f:selectItem itemLabel="اختر   نوع المعاملة " itemValue="" />
                                                        <f:selectItems value="#{newincomebean.applicatioTypeMap}" />
                                                    </p:selectOneMenu>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="مُستقبل المعاملة " />
                                                </div>
                                                <div class="col-md-9">
                                                    <p:selectOneMenu value="#{newincomebean.newIncomeReciever}"  
                                                                     id="newRecordto" required="true" requiredMessage="مستقبل المعاملة "
                                                                     panelStyle="width:300px"
                                                                     effect="fade" var="d"  
                                                                     style="width:300px;direction: rtl; margin-left: 1px;width: 100%;"  
                                                                     filter="true" filterMatchMode="contains">
                                                        <f:selectItem itemLabel="اختر  مستقبل  المعاملة " itemValue="" />
                                                        <f:selectItems value="#{newincomebean.letterToMap}" />
                                                    </p:selectOneMenu>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="مُرسل  المعاملة " />
                                                </div>
                                                <div class="col-md-9">
                                                    <p:selectOneMenu  value="#{newincomebean.newIncomeSender}" id="newRecordfrom" required="true" requiredMessage="مرسل المعاملة مطلوب "
                                                                      panelStyle="width:300px"
                                                                      effect="fade" var="d"  
                                                                      style="width:300px;direction: rtl; margin-left: 1px;width: 100%;"  
                                                                      filter="true" filterMatchMode="contains">
                                                        <f:selectItem itemLabel="اختر   مرسل/جهة المعاملة " itemValue="" />
                                                        <f:selectItems value="#{newincomebean.letterFromMap}" />
                                                    </p:selectOneMenu>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="رقم الخطاب الوارد "  style="font-size: 15px !important;"  />
                                                </div>
                                                <div class="col-md-9">
                                                    <p:row>
                                                        <p:inputText id ="incomeNoFromSender" value="#{newincomebean.newIncomeNoFromSender}" style="width: 30%;" />
                                                        &nbsp;&nbsp; <p:outputLabel value="تاريخه    " />&nbsp;&nbsp;
                                                        <p:inputText id ="incomedateFromSender" value="#{newincomebean.newIncomeDateFromSender}" style="width: 40%;" />

                                                    </p:row>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="الخطاب المشار إلية" style="font-size: 14px !important;"   />
                                                </div>
                                                <div class="col-md-9" >
                                                    <p:inputText id ="incomeNorefered" value="#{newincomebean.newIncomeNoRefered}"  />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row" style="margin-top: 3px;">
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="رقم الجوال" />
                                                </div>
                                                <div class="col-md-9">
                                                    <p:inputText id ="incomemobileNo" value="#{newincomebean.newIncomeMobileNo}" />

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="المعاملة عاجلة" />
                                                </div>
                                                <div class="col-md-9">
                                                    <p:inputSwitch id ="incomeisimportant" value="#{newincomebean.newIncomeIsImportant}" onLabel="نعم&nbsp;&nbsp;&nbsp;" offLabel="لا" />

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row" style="margin-top: 3px;" >
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="ارسلها إلي" />
                                                </div>
                                                <div class="col-md-9">
                                                    <p:selectOneMenu value="#{newincomebean.newIncomeSendTo}"  id="newRecordaftersaveto" required="true" requiredMessage="جهة الارسال بعد الحفظ مطلوبة"

                                                                     effect="fade" var="d"  
                                                                     style="width:300px;direction: rtl; margin-left: 1px;width: 100%"  
                                                                     filter="true" filterMatchMode="contains">
                                                        <f:selectItem itemLabel="الارسال بعد الحفظ   الي" itemValue="" />
                                                        <f:selectItems value="#{newincomebean.letterSendToMap}" />
                                                    </p:selectOneMenu>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="الغرض" /> 

                                                </div>
                                                <div class="col-md-9">
                                                    <p:selectOneMenu value="#{newincomebean.newIncomeSendToPurpose}"  id="newRecordpurp" required="true" requiredMessage="غرض الإرسال مطلوب"
                                                                     panelStyle="width:150px"
                                                                     effect="fade" var="d"  
                                                                     style="width:300px;direction: rtl; margin-left: 1px;width: 100%"  
                                                                     filter="true" filterMatchMode="contains">
                                                        <f:selectItem itemLabel="غرض الإرسال" itemValue="" />
                                                        <f:selectItems value="#{newincomebean.letterSendPurposeMap}" />
                                                    </p:selectOneMenu>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>




                                <div class="row" style="margin-top: 3px;">
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <p:outputLabel value="الشروحات" />
                                                </div>
                                                <div class="col-md-9">
                                                    <p:inputTextarea id ="incomecomment" value="#{newincomebean.newIncomeComment}" style="width: 100%;overflow: auto ; height: 60px;" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="container-fluid">
                                            <div class="row">

                                                <div class="col-md-12">
                                                    <h:form id="NewRecordUploadForm" enctype="multipart/form-data">
                                                        <p:fileUpload  
                                                            id="NewRecordUpload"
                                                            widgetVar="NewIncomeUploader"
                                                            multiple="true"
                                                            fileUploadListener="#{newincomebean.uploadNewIncomeFiles}"
                                                            uploadLabel="ارفاق" 
                                                            cancelLabel="إلغاء" 
                                                            label="تحديد المرفق" 
                                                            previewWidth="0"
                                                            process="@this"
                                                            style="width: 100%;display: block;"
                                                            allowTypes="/(\.|\/)(gif|jpe?g|png|pdf|doc|docx|exe|mp3|dwg|mp4)$/" 
                                                            sizeLimit="300000000">
                                                        </p:fileUpload>
                                                    </h:form> 
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">

                                    </div>
                                    <div class="col-md-4" style="margin-top: 10px;">
                                        <p:commandButton 
                                            type="submit"
                                            process="@this,:tempform:NewRecordForm:newRectitle
                                            ,:tempform:NewRecordForm:newRecordtyp
                                            ,:tempform:NewRecordForm:newRecordto
                                            ,:tempform:NewRecordForm:newRecordfrom
                                            ,:tempform:NewRecordForm:incomeNoFromSender
                                            ,:tempform:NewRecordForm:incomedateFromSender
                                            ,:tempform:NewRecordForm:incomeNorefered
                                            ,:tempform:NewRecordForm:incomemobileNo
                                            ,:tempform:NewRecordForm:incomeisimportant
                                            ,:tempform:NewRecordForm:incomecomment
                                            ,:tempform:NewRecordForm:newRecordaftersaveto
                                            ,:tempform:NewRecordForm:newRecordpurp"
                                            action="#{newincomebean.SaveNewIncome(actionEvent)}"
                                            value="حفظ المعاملة و الإرســال" icon="fa fa-send-o" 
                                            style="width: 100%;height: 50px;"
                                            update=":tempform:NewRecordForm:confirmdlg"
                                            styleClass="ui-priority-primary"
                                            />
                                    </div>
                                    <div class="col-md-4">

                                    </div>
                                </div>
                                <p:messages autoUpdate="true" />
                                <!-- ROW End !! -->
                            </div>
                            <div>
                                <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
                                 
                                <p:dialog widgetVar="statusDialog" modal="true" 
                                          draggable="false" closable="false" resizable="false" showHeader="false">
                                        <p:graphicImage value="../images/loadingT.gif" />
                                </p:dialog>
                                <p:dialog

                                    header="تأكيـــد" 
                                    modal="true" 
                                    style="direction: rtl;font-size: large;" 
                                    widgetVar="confirmationDlg" 
                                    id="confirmdlgId">
                                    <h:form id="confirmdlg">
                                        <p:outputLabel value=" تم حفظ المعاملة بنجاح .. #{newincomebean.newArcRecordId} " />
                                        <h:panelGrid columns="2" style="display: block">
                                            <p:button value="طباعه الباركود" 
                                                      icon="fa fa-sign-in"
                                                      styleClass="btn btn-default"
                                                      onclick="window.open('http://192.168.155.132/reports/rwservlet?report&amp;report=d:\\\\archiving\\\\reports\\\\barcode.rdf&amp;P_1=#{newincomebean.newArcRecordId}')" />         



                                            <p:commandButton process="@this" value=" الرجوع الي البريد"   action="#{newincomebean.goInboxBtnAction(actionEvent)}" icon="fa fa-inbox"  styleClass="btn btn-default" /> 
                                        </h:panelGrid>
                                    </h:form>
                                </p:dialog>
                            </div>


                        </p:outputPanel>
                   
                </h:form>

            </ui:define>

        </ui:composition>

    </body>
</html>
